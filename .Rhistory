questionr::freq(na.omit(datw3$redis_dummy)))
tab02
tab01a$mean <- paste0(tab01a$mean,"(",tab01a$sd,")")
tab01a
tab01<- psych::describe(datw3[,c("lngap_perc","lngap_just")],fast=TRUE)
tab01a<-select(tab01,n,mean,sd)
tab01a
paste0(tab01a$mean,"(",tab01a$sd,")")
tab01a$mean <- paste0(tab01a$mean,"(",tab01a$sd,")")
tab01a
round(tab01a,digits = 2)
tab01<- psych::describe(datw3[,c("lngap_perc","lngap_just")],fast=TRUE)
tab01a<-select(tab01,n,mean,sd)
round(tab01a,digits = 2)
tab01<- psych::describe(datw3[,c("lngap_perc","lngap_just")],fast=TRUE)
tab01a<-select(tab01,n,mean,sd)
tab01a<- round(tab01a,digits = 2)
tab01a
tab01a$mean2 <- paste0(tab01a$mean,"(",tab01a$sd,")")
tab01a$mean2
tab01a
View(tab01a)
tab01a <- as.data.frame(tab01a)
tab01a$mean2 <- paste0(tab01a$mean,"(",tab01a$sd,")")
tab01a
tab01<- psych::describe(datw3[,c("lngap_perc","lngap_just")],fast=TRUE)
tab01a<-select(tab01,n,mean,sd)
tab01a<- round(tab01a,digits = 2)
tab01a <- as.data.frame(tab01a)
tab01a$mean <- paste0(tab01a$mean,"(",tab01a$sd,")")
tab01a
tab01a
tab01a$sd <- NULL
tab01<- psych::describe(datw3[,c("lngap_perc","lngap_just")],fast=TRUE)
tab01a<-select(tab01,n,mean,sd)
tab01a<- round(tab01a,digits = 2)
tab01a <- as.data.frame(tab01a)
tab01a$mean <- paste0(tab01a$mean,"(",tab01a$sd,")")
tab01a$sd <- NULL
tab01a
tab02
tab02<- rbind(
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F),
questionr::freq(na.omit(datw3$redis_dummy),valid = F))
names(tab02) <- c("n","m_sd_pct",)
tab02<- rbind(
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F),
questionr::freq(na.omit(datw3$redis_dummy),valid = F))
names(tab02) <- c("n","m_sd_pct")
"n","m_sd_pct"
questionr::freq(na.omit(datw3$educ_rec),valid = F)
tab01<- psych::describe(datw3[,c("lngap_perc","lngap_just")],fast=TRUE)
tab01a<-select(tab01,n,mean,sd)
tab01a<- round(tab01a,digits = 2)
tab01a <- as.data.frame(tab01a)
tab01a$mean <- paste0(tab01a$mean,"(",tab01a$sd,")")
tab01a$sd <- NULL
tab02<- rbind(
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F),
questionr::freq(na.omit(datw3$redis_dummy),valid = F))
names(tab02) <- c("n","m_sd_pct")
tab02
tab01a
names(tab01a) <- c("n","m_sd_pct")
rbind(tab01a,tab02)
tab01<- psych::describe(datw3[,c("lngap_perc","lngap_just")],fast=TRUE)
tab01a<-select(tab01,n,mean,sd,min,max)
tab01a
tab01a<- round(tab01a,digits = 2)
tab01a <- as.data.frame(tab01a)
tab01a
tab01a$mean <- paste0(tab01a$mean,"(",tab01a$sd,")")
tab01a$sd <- NULL
names(tab01a) <- c("n","m_sd_pct","min","max")
names(tab01a)
tab02$min <- NA
tab02$max <- NA
names(tab02) <- c("n","m_sd_pct","min","max")
rbind(tab01a,tab02)
tab03<- rbind(tab01a,tab02)
tab03
kable(tab03,format = "html")
options(knitr.kable.NA = '')
kable(tab03,format = "html")
kable(tab03,format = "html") %>% kable_styling()
sink("output/tables/desc.html")
kable(tab03,format = "html") %>% kable_styling()
sink()
load("input/data/processed/clw3.RData")
names(clw3)
stargazer(clw3,type = "text")
datw3 <- clw3[,c("lngap_perc","lngap_just","educ_rec","Quint","redis_dummy")]
datw3$redis_dummy <- factor(datw3$redis_dummy,levels = c(0,1),labels = c("Desacuerdo","De Acuerdo"))
datw3$educ_rec    <- factor(datw3$educ_rec,levels = c(1,2,3,4),labels =c("Ed.Básica","Ed.Media", "Ed.Sup.Incomp.", "Ed.Universitaria"))
datw3$Quint       <- factor(datw3$Quint,levels = c(1,2,3,4,5),labels = c("Quintil 1","Quintil 2","Quintil 3","Quintil 4","Quintil 5"))
tab01<- psych::describe(datw3[,c("lngap_perc","lngap_just")],fast=TRUE)
tab01a<-select(tab01,n,mean,sd,min,max)
tab01a<- round(tab01a,digits = 2)
tab01a <- as.data.frame(tab01a)
tab01a$mean <- paste0(tab01a$mean," (",tab01a$sd,")")
tab01a$sd <- NULL
names(tab01a) <- c("n","m_sd_pct","min","max")
tab02<- rbind(
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F),
questionr::freq(na.omit(datw3$redis_dummy),valid = F))
tab02$min <- NA
tab02$max <- NA
names(tab02) <- c("n","m_sd_pct","min","max")
tab03<- rbind(tab01a,tab02)
options(knitr.kable.NA = '')
sink("output/tables/desc.html")
kable(tab03,format = "html") %>% kable_styling()
sink()
load("input/data/processed/clw3.RData")
names(clw3)
datw3 <- clw3[,c("lngap_perc","lngap_just","educ_rec","Quint","redis_dummy")]
names(clw3)
load("input/data/processed/dat99")
load("input/data/processed/dat99.Rdata")
load("~/Dropbox/proyectos y papers compartidos/Perceptions, beliefs, attributions about inequality and poverty/chilegapstime/input/data/processed/dat99.RData")
getwd()
load("input/data/intermediate/cl99.RData") # cl99
load("input/data/processed/dat99.RData")
load("input/data/processed/dat99.RData")
load("input/data/processed/dat09.RData")
load("input/data/processed/dat19.RData")
dat99$year <- 1999
dat09$year <- 2009
dat19$year <- 2019
clw3<- bind_rows(dat99,dat09)
clw3<- bind_rows(clw3,dat19)
save(clw3,file = "input/data/processed/clw3.Rdata")
names(clw3)
library(sjlabelled)
library(dplyr)
library(haven)
library(descr)
library(sjmisc)
library(stargazer)
load("input/data/intermediate/cl99.RData") # cl99
find_var(cl99,"worker",search = "all") # v21: perceived worker, v31 just worker unrecoded
find_var(cl99,"chairman",search = "all") # v16: perceived chairman, v26 just chairman unrecoded
dat99 <- cl99 %>% select(v21,v31,v16,v26) %>% rename(salperger=v16,
salperobr=v21,
saljusger=v26,
saljusobr=v31)
stargazer(dat99, type="text")
dat99[][dat99  >= 99999999998] <- NA # missings
dat99 <- dat99 %>%
mutate(salperobr=replace(salperobr, salperobr <= 40000 | salperobr>= 1000000, NA)) %>%
mutate(salperger=replace(salperger, salperger <= 250000 | salperger>= 100000001, NA)) %>%
mutate(saljusobr=replace(saljusobr, saljusobr <= 40000, NA)) %>%
mutate(saljusger=replace(saljusger, saljusger <= 100000, NA))
#---Brecha salarial percibida
dat99$gap_perc   <-  as.numeric(dat99$salperger/dat99$salperobr) # diferencia total
dat99$lngap_perc <-  as.numeric(log(dat99$gap_perc))                 # diferencia log
#---Brecha salarial justa
dat99$gap_just   <-  as.numeric(dat99$saljusger/dat99$saljusobr) # diferencia total
dat99$lngap_just <-  as.numeric(log(dat99$gap_just))                # diferencia log
dim(na.omit(dat99))
summary(dat99)
summary(dat99)
### b - education 1999
```{r}
find_var(cl99,"degr",search = "all") # degree: perceived worker, v31 just worker
frq(as.factor(cl99$x_degr))
frq(as.factor(cl99$degree))
edcl99 <- cl99 %>% select(degree) %>% mutate(educ_rec=rec(degree,rec = "1:4=1; 5=2 ; 6=3 ; 7=4"))
names(dat99)
dat99<-cbind(dat99,edcl99 %>% select(educ_rec)) # add educ to table
summary(dat99)
dat99 %>% group_by(educ_rec) %>% summarize(m=median(gap_perc, na.rm = TRUE))
dat99 %>% group_by(educ_rec) %>% summarize(m=median(gap_perc, na.rm = TRUE))
### c-income 1999
```{r}
find_var(cl99,"income",search = "all") # v21: perceived worker, v31 just worker
freq(cl99$incomer) # deciles family
freq(cl99$rincomer) # 10 categories respondent, more missings
freq(cl99$income) # 14 categories family
freq(cl99$rincome) # categories respondent
cl99$income_c= rec(cl99$income,rec =
"1=45000;
2=105500;
3=135500;
4=165500;
5=195500;
6=225500;
7=265500;
8=240500;
9=495500;
10=800500;
11=1250000;
12=1750000;
13=2500000;
14=4000000;
999998=NA;
999999=NA")
freq(cl99$income_c) # ok
find_var(cl99,"household",search = "all") # persons in household
freq(cl99$hompop)
dat99$ingreso_pc= cl99$income_c/cl99$hompop
dat99 %>% mutate(Quint = ntile(ingreso_pc,5)) -> dat99
# Check
freq( dat99$Quint)
names(clw3)
names(dat09)
names(dat99)
dat99 <- cl99 %>% select(v21,v31,v16,v26) %>% rename(salperger=v16,
salperobr=v21,
saljusger=v26,
saljusobr=v31)
stargazer(dat99, type="text")
dat99[][dat99  >= 99999999998] <- NA # missings
dat99 <- dat99 %>%
mutate(salperobr=replace(salperobr, salperobr <= 40000 | salperobr>= 1000000, NA)) %>%
mutate(salperger=replace(salperger, salperger <= 250000 | salperger>= 100000001, NA)) %>%
mutate(saljusobr=replace(saljusobr, saljusobr <= 40000, NA)) %>%
mutate(saljusger=replace(saljusger, saljusger <= 100000, NA))
#---Brecha salarial percibida
dat99$gap_perc   <-  as.numeric(dat99$salperger/dat99$salperobr) # diferencia total
dat99$lngap_perc <-  as.numeric(log(dat99$gap_perc))                 # diferencia log
#---Brecha salarial justa
dat99$gap_just   <-  as.numeric(dat99$saljusger/dat99$saljusobr) # diferencia total
dat99$lngap_just <-  as.numeric(log(dat99$gap_just))                # diferencia log
dim(na.omit(dat99))
summary(dat99)
summary(dat99)
### b - education 1999
```{r}
find_var(cl99,"degr",search = "all") # degree: perceived worker, v31 just worker
frq(as.factor(cl99$x_degr))
frq(as.factor(cl99$degree))
edcl99 <- cl99 %>% select(degree) %>% mutate(educ_rec=rec(degree,rec = "1:4=1; 5=2 ; 6=3 ; 7=4"))
names(dat99)
dat99<-cbind(dat99,edcl99 %>% select(educ_rec)) # add educ to table
summary(dat99)
dat99 %>% group_by(educ_rec) %>% summarize(m=median(gap_perc, na.rm = TRUE))
dat99 %>% group_by(educ_rec) %>% summarize(m=median(gap_perc, na.rm = TRUE))
### c-income 1999
```{r}
find_var(cl99,"income",search = "all") # v21: perceived worker, v31 just worker
freq(cl99$incomer) # deciles family
freq(cl99$rincomer) # 10 categories respondent, more missings
freq(cl99$income) # 14 categories family
freq(cl99$rincome) # categories respondent
cl99$income_c= rec(cl99$income,rec =
"1=45000;
2=105500;
3=135500;
4=165500;
5=195500;
6=225500;
7=265500;
8=240500;
9=495500;
10=800500;
11=1250000;
12=1750000;
13=2500000;
14=4000000;
999998=NA;
999999=NA")
freq(cl99$income_c) # ok
find_var(cl99,"household",search = "all") # persons in household
freq(cl99$hompop)
dat99$ingreso_pc= cl99$income_c/cl99$hompop
dat99 %>% mutate(Quint = ntile(ingreso_pc,5)) -> dat99
# Check
freq( dat99$Quint)
### d - redistribution 1999
```{r}
find_var(cl99,"income",search = "all") # v35
freq(cl99$v35)
get_labels(cl99$v35,values = "as.name")
dat99$redis <-rec(cl99$v35, rec="8:9=NA;else=copy")
dat99$redis <-rec(dat99$redis, rec="rev")
freq(dat99$redis)
dat99$redis <-set_labels(dat99$redis,labels= c("Muy en desacuerdo"=1, "En descacuerdo"=2,"Ni acuerdo ni desacuerdo"=3, "De acuerdo"=4, "Muy de acuerdo"=5))
get_labels(dat99$redis, values="as.name")
#dummy redis
dat99$redis_dummy<-ifelse(dat99$redis>3,1,0)
dat99$redis_dummy <-set_labels(dat99$redis_dummy,labels= c("En desacuerdo"=0, "De acuerdo"=1))
freq(dat99$redis_dummy)
freq(to_label(dat99$redis))
freq(to_label(dat99$redis))
freq(to_label(dat99$redis))
```
### e - estatus subjetivo
```{r}
table(cl99$v46)
cl99$v46 <- car::recode(cl99$v46,"c(97,98,99)=NA",as.numeric = TRUE)
cl99$v46 <- sjmisc::rec(cl99$v46,rec="rev")
freq(cl99$v46) # OK esatus subjetivo 1999
dat99$ess <- cl99$v46 # save estatus subjetivo en dat99
table(cl99$v46)
cl99$v46 <- car::recode(cl99$v46,"c(97,98,99)=NA",as.numeric = TRUE)
cl99$v46 <- sjmisc::rec(cl99$v46,rec="rev")
freq(cl99$v46) # OK esatus subjetivo 1999
dat99$ess <- cl99$v46 # save estatus subjetivo en dat99
### Save 99 data
```{r}
save(dat99,file = "input/data/processed/dat99.RData")
```
names(dat99)
names(dat09)
names(dat19)
dat99$year <- 1999
dat09$year <- 2009
dat19$year <- 2019
clw3<- bind_rows(dat99,dat09)
clw3<- bind_rows(clw3,dat19)
save(clw3,file = "input/data/processed/clw3.Rdata")
names(clw3)
load("input/data/processed/clw3.RData")
load("~/Dropbox/proyectos y papers compartidos/Perceptions, beliefs, attributions about inequality and poverty/chilegapstime/input/data/processed/clw3.Rdata")
load("input/data/processed/clw3.Rdata")
names(clw3)
datw3 <- clw3[,c("lngap_perc","lngap_just","educ_rec","Quint","redis_dummy")]
datw3$redis_dummy <- factor(datw3$redis_dummy,levels = c(0,1),labels = c("Desacuerdo","De Acuerdo"))
datw3$educ_rec    <- factor(datw3$educ_rec,levels = c(1,2,3,4),labels =c("Ed.Básica","Ed.Media", "Ed.Sup.Incomp.", "Ed.Universitaria"))
datw3$Quint       <- factor(datw3$Quint,levels = c(1,2,3,4,5),labels = c("Quintil 1","Quintil 2","Quintil 3","Quintil 4","Quintil 5"))
tab01<- psych::describe(datw3[,c("lngap_perc","lngap_just")],fast=TRUE)
tab01a<-select(tab01,n,mean,sd,min,max)
tab01a<- round(tab01a,digits = 2)
tab01a <- as.data.frame(tab01a)
tab01a$mean <- paste0(tab01a$mean," (",tab01a$sd,")")
tab01a$sd <- NULL
names(tab01a) <- c("n","m_sd_pct","min","max")
tab02<- rbind(
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F),
questionr::freq(na.omit(datw3$redis_dummy),valid = F))
tab02$min <- NA
tab02$max <- NA
names(tab02) <- c("n","m_sd_pct","min","max")
tab03<- rbind(tab01a,tab02)
options(knitr.kable.NA = '')
tab03$var <- rownames(tab03)
tab03$var[tab03$var=="lngap_perc"] <- "Percibida"
tab03$var[tab03$var=="lngap_just"] <- "Justa"
tab03$mod <- c("Brecha Salarial","Brecha Salarial","Educación","Educación","Educación","Educación",
"Ingreso","Ingreso","Ingreso","Ingreso","Ingreso", "Pref. Redistributivas","Pref. Redistributivas")
tab03 <- select(tab03,mod,var,everything())
sink("output/tables/desc.html")
kable(tab03,format = "html",booktabs=T ,row.names = F,col.names = c("Dimensión","N","Variable/niveles","Media(DS)","Min","Max")) %>%
kable_styling() %>%
collapse_rows(columns = 1,valign = "middle")
sink()
sink("output/tables/desc.html")
kable(tab03,format = "html",booktabs=T ,row.names = F,col.names = c("Dimensión","N","Variable/niveles","Media(DS)","Min","Max")) %>%
kable_styling() %>%
collapse_rows(columns = 1,valign = "middle")
sink()
sink()
sink("output/tables/desc.html")
kableExtra::kable(tab03,format = "html",booktabs=T ,row.names = F,col.names = c("Dimensión","N","Variable/niveles","Media(DS)","Min","Max")) %>%
kable_styling() %>%
collapse_rows(columns = 1,valign = "middle")
kable::kable(tab03,format = "html",booktabs=T ,row.names = F,col.names = c("Dimensión","N","Variable/niveles","Media(DS)","Min","Max")) %>%
kable_styling() %>%
collapse_rows(columns = 1,valign = "middle")
kableExtra::kable(tab03,format = "html",booktabs=T ,row.names = F,col.names = c("Dimensión","N","Variable/niveles","Media(DS)","Min","Max")) %>%
kable_styling() %>%
collapse_rows(columns = 1,valign = "middle")
sink()
install.packages("kableExtra")
install.packages("kableExtra")
kableExtra::kable(tab03,format = "html",booktabs=T ,row.names = F,col.names = c("Dimensión","N","Variable/niveles","Media(DS)","Min","Max")) %>%
kable_styling() %>%
collapse_rows(columns = 1,valign = "middle")
library(dplyr)
library(sjlabelled)
library(sjPlot)
library(ggplot2)
library(knitr)
library(kableExtra)
library(stargazer)
kableExtra::kable(tab03,format = "html",booktabs=T ,row.names = F,col.names = c("Dimensión","N","Variable/niveles","Media(DS)","Min","Max")) %>%
kable_styling() %>%
collapse_rows(columns = 1,valign = "middle")
sink("output/tables/desc.html")
kableExtra::kable(tab03,format = "html",booktabs=T ,row.names = F,col.names = c("Dimensión","N","Variable/niveles","Media(DS)","Min","Max")) %>%
kable_styling() %>%
collapse_rows(columns = 1,valign = "middle")
sink()
tab02<- rbind(
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F),
#questionr::freq(na.omit(datw3$redis_dummy),valid = F))
tab02$min <- NA
tab02$max <- NA
names(tab02) <- c("n","m_sd_pct","min","max")
tab03<- rbind(tab01a,tab02)
options(knitr.kable.NA = '')
tab03$var <- rownames(tab03)
tab03$var[tab03$var=="lngap_perc"] <- "Percibida"
tab03$var[tab03$var=="lngap_just"] <- "Justa"
tab03$mod <- c("Brecha Salarial","Brecha Salarial","Educación","Educación","Educación","Educación",
"Ingreso","Ingreso","Ingreso","Ingreso","Ingreso", "Pref. Redistributivas","Pref. Redistributivas")
tab03 <- select(tab03,mod,var,everything())
sink("output/tables/desc.html")
kableExtra::kable(tab03,format = "html",booktabs=T ,row.names = F,col.names = c("Dimensión","N","Variable/niveles","Media(DS)","Min","Max")) %>%
kable_styling() %>%
collapse_rows(columns = 1,valign = "middle")
sink()
load("input/data/processed/clw3.Rdata")
names(clw3)
datw3 <- clw3[,c("lngap_perc","lngap_just","educ_rec","Quint")]
datw3$educ_rec    <- factor(datw3$educ_rec,levels = c(1,2,3,4),labels =c("Ed.Básica","Ed.Media", "Ed.Sup.Incomp.", "Ed.Universitaria"))
datw3$Quint       <- factor(datw3$Quint,levels = c(1,2,3,4,5),labels = c("Quintil 1","Quintil 2","Quintil 3","Quintil 4","Quintil 5"))
tab01<- psych::describe(datw3[,c("lngap_perc","lngap_just")],fast=TRUE)
tab01a<-select(tab01,n,mean,sd,min,max)
tab01a<- round(tab01a,digits = 2)
tab01a <- as.data.frame(tab01a)
tab01a$mean <- paste0(tab01a$mean," (",tab01a$sd,")")
tab01a$sd <- NULL
names(tab01a) <- c("n","m_sd_pct","min","max")
tab02<- rbind(
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F),
#questionr::freq(na.omit(datw3$redis_dummy),valid = F))
tab02$min <- NA
tab02$max <- NA
names(tab02) <- c("n","m_sd_pct","min","max")
tab03<- rbind(tab01a,tab02)
options(knitr.kable.NA = '')
tab03$var <- rownames(tab03)
tab03$var[tab03$var=="lngap_perc"] <- "Percibida"
tab03$var[tab03$var=="lngap_just"] <- "Justa"
tab03$mod <- c("Brecha Salarial","Brecha Salarial","Educación","Educación","Educación","Educación",
"Ingreso","Ingreso","Ingreso","Ingreso","Ingreso")
datw3 <- clw3[,c("lngap_perc","lngap_just","educ_rec","Quint")]
datw3$educ_rec    <- factor(datw3$educ_rec,levels = c(1,2,3,4),labels =c("Ed.Básica","Ed.Media", "Ed.Sup.Incomp.", "Ed.Universitaria"))
datw3$Quint       <- factor(datw3$Quint,levels = c(1,2,3,4,5),labels = c("Quintil 1","Quintil 2","Quintil 3","Quintil 4","Quintil 5"))
datw3
tab01<- psych::describe(datw3[,c("lngap_perc","lngap_just")],fast=TRUE)
tab01a<-select(tab01,n,mean,sd,min,max)
tab01a<- round(tab01a,digits = 2)
tab01a <- as.data.frame(tab01a)
tab01a$mean <- paste0(tab01a$mean," (",tab01a$sd,")")
tab01a$sd <- NULL
names(tab01a) <- c("n","m_sd_pct","min","max")
tab01a
tab02<- rbind(
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F),
#questionr::freq(na.omit(datw3$redis_dummy),valid = F))
tab02$min <- NA
tab02$max <- NA
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F),
#questionr::freq(na.omit(datw3$redis_dummy),valid = F))
tab02$min <- NA
tab02<- rbind(
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F)
#questionr::freq(na.omit(datw3$redis_dummy)
,valid = F))
tab02<- rbind(
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F),
#questionr::freq(na.omit(datw3$redis_dummy)
valid = F))
tab02<- rbind(
questionr::freq(na.omit(datw3$educ_rec),valid = F),
questionr::freq(na.omit(datw3$Quint),valid = F))
#questionr::freq(na.omit(datw3$redis_dummy),valid = F))
tab02$min <- NA
tab02$max <- NA
names(tab02) <- c("n","m_sd_pct","min","max")
tab03<- rbind(tab01a,tab02)
options(knitr.kable.NA = '')
tab03$var <- rownames(tab03)
tab03$var[tab03$var=="lngap_perc"] <- "Percibida"
tab03$var[tab03$var=="lngap_just"] <- "Justa"
tab03$mod <- c("Brecha Salarial","Brecha Salarial","Educación","Educación","Educación","Educación",
"Ingreso","Ingreso","Ingreso","Ingreso","Ingreso")
tab03 <- select(tab03,mod,var,everything())
kableExtra::kable(tab03,format = "html",booktabs=T ,row.names = F,col.names = c("Dimensión","N","Variable/niveles","Media(DS)","Min","Max")) %>%
kable_styling() %>%
collapse_rows(columns = 1,valign = "middle")
sink("output/tables/desc.html")
kableExtra::kable(tab03,format = "html",booktabs=T ,row.names = F,col.names = c("Dimensión","N","Variable/niveles","Media(DS)","Min","Max")) %>%
kable_styling() %>%
collapse_rows(columns = 1,valign = "middle")
sink()
load("input/data/processed/issp9919.RData")
library(sjPlot)
reg_year<- lm(lngap_just~lngap_perc*year, data=clw3 )
stargazer(reg_year, type="text")
reg_year<- lm(lngap_just~lngap_perc*as.factor(year), data=clw3 )
stargazer(reg_year, type="text")
load("input/data/processed/clw3.Rdata")
names(clw3)
rta<-lm(lngap_perc ~ + as.factor(educ_rec) + as.factor(Quint) + as.factor(year), data=clw3)
rtb<-lm(lngap_just ~ + as.factor(educ_rec) + as.factor(Quint) + as.factor(year), data=clw3)
rtc<-lm(lngap_just ~ + as.factor(educ_rec) + as.factor(Quint) + lngap_perc + as.factor(year)*lngap_perc, data=clw3)
sink("output/tables/table_gapyear_int.html")
stargazer::stargazer(list(rta,rtb,rtc), type="html",
covariate.labels = c("Ed.Media", "Ed.Sup.Incomp.", "Ed.Universitaria", "Quintil 2", "Quintil 3","Quintil 2","Quintil 5", "Brecha Percibida", "Año 2009", "Año 2019", "Brecha Percibida: 2009","Brecha Percibida: 2019"),
dep.var.labels = c("Brecha Percibida", "Brecha Justa"))
sink()
pacman::p_load(lme4,foreign, stargazer, texreg, lattice, sjPlot, dplyr, ggeffects) # paquetes a cargar
reg_3year=lmer(lngap_just ~ 1 + lngap_perc +  as.factor(educ_rec) + as.factor(Quint) +(1 + lngap_perc | year), data = clw3)
graf_year3=ggpredict(reg_3year, terms = c("lngap_perc","year [sample=3]"), type="re")
grafyear3<-plot(graf_year3)
grafyear3
ggsave(grafyear3,filename = "output/images/graf_year3.png",device = "png",width = 20,height = 15,dpi = "retina",units = "cm")
