<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="" />


<title>Data preparation B</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Chile Gaps Time</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="paper.html">Paper</a>
</li>
<li>
  <a href="data-prep-B.html">Análisis</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/juancarloscastillo/chilegapstime">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Data preparation B</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#data-preparation-b-selects-recodes"><span class="toc-section-number">1</span> Data preparation B: selects &amp; recodes</a><ul>
<li><a href="#libraries"><span class="toc-section-number">1.1</span> Libraries</a></li>
<li><a href="#variables"><span class="toc-section-number">1.2</span> Variables:</a></li>
<li><a href="#year-1999"><span class="toc-section-number">1.3</span> Year 1999</a><ul>
<li><a href="#load-data-1999"><span class="toc-section-number">1.3.1</span> Load data 1999</a></li>
<li><a href="#a--salaries-perceived-just-worker-manager-1999"><span class="toc-section-number">1.3.2</span> a- salaries perceived &amp; just worker &amp; manager 1999</a></li>
<li><a href="#b---education-1999"><span class="toc-section-number">1.3.3</span> b - education 1999</a></li>
<li><a href="#c-income-1999"><span class="toc-section-number">1.3.4</span> c-income 1999</a></li>
<li><a href="#d---redistribution-1999"><span class="toc-section-number">1.3.5</span> d - redistribution 1999</a></li>
<li><a href="#e---estatus-subjetivo"><span class="toc-section-number">1.3.6</span> e - estatus subjetivo</a></li>
<li><a href="#save-99-data"><span class="toc-section-number">1.3.7</span> Save 99 data</a></li>
</ul></li>
<li><a href="#year-2009"><span class="toc-section-number">1.4</span> Year 2009</a><ul>
<li><a href="#load-data-2009"><span class="toc-section-number">1.4.1</span> Load data 2009</a></li>
<li><a href="#a--salaries-perceived-just-worker-manager-2009"><span class="toc-section-number">1.4.2</span> a- salaries perceived &amp; just worker &amp; manager 2009</a></li>
<li><a href="#b---education-2009"><span class="toc-section-number">1.4.3</span> b - education 2009</a></li>
<li><a href="#c-income-2009"><span class="toc-section-number">1.4.4</span> c-income 2009</a></li>
<li><a href="#d---redistribution-2009"><span class="toc-section-number">1.4.5</span> d - redistribution 2009</a></li>
<li><a href="#e---estatus-subjetivo-1"><span class="toc-section-number">1.4.6</span> e - estatus subjetivo</a></li>
<li><a href="#save-09-data"><span class="toc-section-number">1.4.7</span> Save 09 data</a></li>
</ul></li>
<li><a href="#year-2019"><span class="toc-section-number">1.5</span> Year 2019</a><ul>
<li><a href="#load-data-2019"><span class="toc-section-number">1.5.1</span> Load data 2019</a></li>
<li><a href="#a--salaries-perceived-just-worker-manager-2019"><span class="toc-section-number">1.5.2</span> a- salaries perceived &amp; just worker &amp; manager 2019</a></li>
<li><a href="#b---education-2019"><span class="toc-section-number">1.5.3</span> b - education 2019</a></li>
<li><a href="#c-income-2019"><span class="toc-section-number">1.5.4</span> c-income 2019</a></li>
<li><a href="#d---redistribution-2019"><span class="toc-section-number">1.5.5</span> d - redistribution 2019</a></li>
<li><a href="#e---estatus-subjetivo-2"><span class="toc-section-number">1.5.6</span> e - estatus subjetivo</a></li>
<li><a href="#save-19-data"><span class="toc-section-number">1.5.7</span> Save 19 data</a></li>
<li><a href="#save-all-years-data"><span class="toc-section-number">1.5.8</span> Save all years data</a></li>
</ul></li>
</ul></li>
</ul>
</div>

<div id="data-preparation-b-selects-recodes" class="section level1">
<h1><span class="header-section-number">1</span> Data preparation B: selects &amp; recodes</h1>
<div id="libraries" class="section level2">
<h2><span class="header-section-number">1.1</span> Libraries</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(sjlabelled)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(haven)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">library</span>(descr)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">library</span>(sjmisc)</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw">library</span>(stargazer)</a></code></pre></div>
</div>
<div id="variables" class="section level2">
<h2><span class="header-section-number">1.2</span> Variables:</h2>
<p>a- salaries perceived &amp; just worker &amp; manager b- education c- income d- redistribution e- estatus subjetivo</p>
</div>
<div id="year-1999" class="section level2">
<h2><span class="header-section-number">1.3</span> Year 1999</h2>
<div id="load-data-1999" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Load data 1999</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">load</span>(<span class="st">&quot;input/data/intermediate/cl99.RData&quot;</span>) <span class="co"># cl99</span></a></code></pre></div>
</div>
<div id="a--salaries-perceived-just-worker-manager-1999" class="section level3">
<h3><span class="header-section-number">1.3.2</span> a- salaries perceived &amp; just worker &amp; manager 1999</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># Find vars</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">find_var</span>(cl99,<span class="st">&quot;worker&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># v21: perceived worker, v31 just worker unrecoded</span></a></code></pre></div>
<pre><code>##    col.nr var.name
## 1      14     v14r
## 2      21     v21r
## 3      24     v24r
## 4      31     v31r
## 5      43      v43
## 6      60      v60
## 7     113      v14
## 8     120      v21
## 9     123      v24
## 10    130      v31
## 11     62    v62_4
## 12     63    v62_3
## 13     78 isco88_3
## 14     79 spis88_3
## 15     80 isco88_4
## 16     81 spis88_4
## 17     82    x_occ
## 18     84  fisco_3
## 19     85  fisco_4
## 20     87  misco_3
##                                                    var.label
## 1                    Income: skilled worker in a factory    
## 2                   Income: an unskilled worker in a factory
## 3            Ought to be paid: a skilled worker in a factory
## 4        Ought to be paid: a n unskilled worker in a factory
## 5                    Conflict: management - workers         
## 6                    Diagram: an unskilled worker           
## 7                    Income: skilled worker in a factory    
## 8                    Income: a unskilled worker in a factory
## 9            Ought to be paid: a skilled worker in a factory
## 10        Ought to be paid: an unskilled worker in a factory
## 11                 Father: Occupation ISCO when you were 15 
## 12 Father: Occupation ISCO when you were 15 years (3 digits)
## 13                             R: Occupation ISCO (3 digits)
## 14                            SP: Occupation ISCO (3 digits)
## 15                             R: Occupation ISCO (4 digits)
## 16                            SP: Occupation ISCO (4 digits)
## 17                                    R: Occupation specific
## 18                       Father: Occupation ISCO  (3 digits)
## 19                                  Father: Occupation ISCO 
## 20                        Mother: Occupation ISCO (3 digits)</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">find_var</span>(cl99,<span class="st">&quot;chairman&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># v16: perceived chairman, v26 just chairman unrecoded</span></a></code></pre></div>
<pre><code>##   col.nr var.name
## 1     16     v16r
## 2     26     v26r
## 3     61      v61
## 4    115      v16
## 5    125      v26
##                                                        var.label
## 1       Income: The chairman of a large national corporation    
## 2 Ought to be paid: the chairman of a large national corporation
## 3                        Diagram: the chairman of a corporation 
## 4           Income: The chairman of a large national corporation
## 5          Ought to be paid: the chairman of a large corporation</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># Create object with vars &amp; rename</span></a>
<a class="sourceLine" id="cb7-2" title="2"></a>
<a class="sourceLine" id="cb7-3" title="3">dat99 &lt;-<span class="st"> </span>cl99 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(v21,v31,v16,v26) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename</span>(<span class="dt">salperger=</span>v16,</a>
<a class="sourceLine" id="cb7-4" title="4">               <span class="dt">salperobr=</span>v21,</a>
<a class="sourceLine" id="cb7-5" title="5">               <span class="dt">saljusger=</span>v26,</a>
<a class="sourceLine" id="cb7-6" title="6">               <span class="dt">saljusobr=</span>v31)</a>
<a class="sourceLine" id="cb7-7" title="7"></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co"># Recodes</span></a>
<a class="sourceLine" id="cb7-9" title="9"></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="kw">stargazer</span>(dat99, <span class="dt">type=</span><span class="st">&quot;text&quot;</span>)</a></code></pre></div>
<pre><code>## 
## =====================================================================================================
## Statistic   N          Mean             St. Dev.        Min   Pctl(25)     Pctl(75)         Max      
## -----------------------------------------------------------------------------------------------------
## salperobr 1,503 20,293,168,113.000 40,231,070,363.000 10,000   90,000      160,000     99,999,999,999
## saljusobr 1,503 21,357,897,157.000 40,996,183,772.000 25,000   150,000     300,000     99,999,999,999
## salperger 1,503 37,995,788,975.000 48,548,504,529.000 100,000 2,000,000 99,999,999,998 99,999,999,999
## saljusger 1,503 42,717,023,815.000 49,480,725,714.000 80,000  2,000,000 99,999,999,998 99,999,999,999
## -----------------------------------------------------------------------------------------------------</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">dat99[][dat99  <span class="op">&gt;=</span><span class="st"> </span><span class="dv">99999999998</span>] &lt;-<span class="st"> </span><span class="ot">NA</span> <span class="co"># missings</span></a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3">dat99 &lt;-<span class="st"> </span>dat99 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">salperobr=</span><span class="kw">replace</span>(salperobr, salperobr <span class="op">&lt;=</span><span class="st"> </span><span class="dv">40000</span> <span class="op">|</span><span class="st"> </span>salperobr<span class="op">&gt;=</span><span class="st"> </span><span class="dv">1000000</span>, <span class="ot">NA</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">salperger=</span><span class="kw">replace</span>(salperger, salperger <span class="op">&lt;=</span><span class="st"> </span><span class="dv">250000</span> <span class="op">|</span><span class="st"> </span>salperger<span class="op">&gt;=</span><span class="st"> </span><span class="dv">100000001</span>, <span class="ot">NA</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">saljusobr=</span><span class="kw">replace</span>(saljusobr, saljusobr <span class="op">&lt;=</span><span class="st"> </span><span class="dv">40000</span>, <span class="ot">NA</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">saljusger=</span><span class="kw">replace</span>(saljusger, saljusger <span class="op">&lt;=</span><span class="st"> </span><span class="dv">100000</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb9-8" title="8"></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">#---Brecha salarial percibida</span></a>
<a class="sourceLine" id="cb9-10" title="10">dat99<span class="op">$</span>gap_perc   &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(dat99<span class="op">$</span>salperger<span class="op">/</span>dat99<span class="op">$</span>salperobr) <span class="co"># diferencia total</span></a>
<a class="sourceLine" id="cb9-11" title="11">dat99<span class="op">$</span>lngap_perc &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(<span class="kw">log</span>(dat99<span class="op">$</span>gap_perc))                 <span class="co"># diferencia log</span></a>
<a class="sourceLine" id="cb9-12" title="12"></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="co">#---Brecha salarial justa</span></a>
<a class="sourceLine" id="cb9-14" title="14">dat99<span class="op">$</span>gap_just   &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(dat99<span class="op">$</span>saljusger<span class="op">/</span>dat99<span class="op">$</span>saljusobr) <span class="co"># diferencia total</span></a>
<a class="sourceLine" id="cb9-15" title="15">dat99<span class="op">$</span>lngap_just &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(<span class="kw">log</span>(dat99<span class="op">$</span>gap_just))                <span class="co"># diferencia log</span></a>
<a class="sourceLine" id="cb9-16" title="16"><span class="kw">dim</span>(<span class="kw">na.omit</span>(dat99))</a></code></pre></div>
<pre><code>## [1] 773   8</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">summary</span>(dat99)</a></code></pre></div>
<pre><code>##    salperobr        saljusobr           salperger        
##  Min.   : 45000   Min.   :    50000   Min.   :   300000  
##  1st Qu.: 90000   1st Qu.:   150000   1st Qu.:  1500000  
##  Median : 90000   Median :   200000   Median :  3000000  
##  Mean   :102527   Mean   :   778495   Mean   :  6496250  
##  3rd Qu.:100000   3rd Qu.:   200000   3rd Qu.:  6000000  
##  Max.   :800000   Max.   :300000000   Max.   :100000000  
##  NA&#39;s   :318      NA&#39;s   :322         NA&#39;s   :583        
##    saljusger            gap_perc         lngap_perc    
##  Min.   :   160000   Min.   :   2.50   Min.   :0.9163  
##  1st Qu.:  1000000   1st Qu.:  15.00   1st Qu.:2.7081  
##  Median :  2000000   Median :  33.33   Median :3.5066  
##  Mean   :  4306460   Mean   :  69.55   Mean   :3.5403  
##  3rd Qu.:  4000000   3rd Qu.:  66.67   3rd Qu.:4.1997  
##  Max.   :600000000   Max.   :1250.00   Max.   :7.1309  
##  NA&#39;s   :647         NA&#39;s   :612       NA&#39;s   :612     
##     gap_just           lngap_just    
##  Min.   :   0.0188   Min.   :-3.977  
##  1st Qu.:   5.3333   1st Qu.: 1.674  
##  Median :  10.0000   Median : 2.303  
##  Mean   :  24.5541   Mean   : 2.419  
##  3rd Qu.:  22.2222   3rd Qu.: 3.101  
##  Max.   :2000.0000   Max.   : 7.601  
##  NA&#39;s   :655         NA&#39;s   :655</code></pre>
</div>
<div id="b---education-1999" class="section level3">
<h3><span class="header-section-number">1.3.3</span> b - education 1999</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># Find vars</span></a>
<a class="sourceLine" id="cb13-2" title="2"></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="kw">find_var</span>(cl99,<span class="st">&quot;degr&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># degree: perceived worker, v31 just worker</span></a></code></pre></div>
<pre><code>##   col.nr var.name                                var.label
## 1     75   degree R: Education II: categories             
## 2    112   x_degr        Education II: Categories specific
## 3    135    x_v65      Education father (Specific Country)
## 4    136    x_v66      Education mother (Specific country)</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">frq</span>(<span class="kw">as.factor</span>(cl99<span class="op">$</span>x_degr))</a></code></pre></div>
<pre><code>## 
## x &lt;categorical&gt;
## # total N=1503  valid N=1503  mean=3004.26  sd=2.27
## 
##   val frq raw.prc valid.prc cum.prc
##  3001  39    2.59      2.59    2.59
##  3002 412   27.41     27.41   30.01
##  3003 179   11.91     11.91   41.92
##  3004 228   15.17     15.17   57.09
##  3005 351   23.35     23.35   80.44
##  3006  69    4.59      4.59   85.03
##  3007  81    5.39      5.39   90.42
##  3008  36    2.40      2.40   92.81
##  3009  17    1.13      1.13   93.95
##  3010  91    6.05      6.05  100.00
##    NA   0    0.00        NA      NA</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">frq</span>(<span class="kw">as.factor</span>(cl99<span class="op">$</span>degree))</a></code></pre></div>
<pre><code>## 
## x &lt;categorical&gt;
## # total N=1503  valid N=1486  mean=3.89  sd=1.62
## 
##  val frq raw.prc valid.prc cum.prc
##    1  39    2.59      2.62    2.62
##    2 412   27.41     27.73   30.35
##    3 179   11.91     12.05   42.40
##    4 228   15.17     15.34   57.74
##    5 387   25.75     26.04   83.78
##    6 160   10.65     10.77   94.55
##    7  81    5.39      5.45  100.00
##   NA  17    1.13        NA      NA</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="co"># Problema: no se encuentran los codigos originales en codebook, se derivan de la pregunta father education v317, que tiene las 7 categorías unesco asumiendo que las 7 de degree son las mismas:</span></a>
<a class="sourceLine" id="cb19-2" title="2"></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="co"># 1. None</span></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="co"># 2. Incomplete primary</span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="co"># 3. Primary completed</span></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="co"># 4. Incomplete secondary (also includes completed qualifications at a level below academic secondary school</span></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="co"># completion – for example skilled manual qualifications given by trade schools.)</span></a>
<a class="sourceLine" id="cb19-8" title="8"><span class="co"># 5. Secondary completed</span></a>
<a class="sourceLine" id="cb19-9" title="9"><span class="co"># 6. Some tertiary education but less than a university Bachelor’s degree (Includes incomplete university. Also</span></a>
<a class="sourceLine" id="cb19-10" title="10"><span class="co"># includes completed post-secondary courses below university Bachelor’s degree level. Examples are qualifications</span></a>
<a class="sourceLine" id="cb19-11" title="11"><span class="co"># from US junior college, polytechnical institutes in many countries, and other similar post-secondary education.)</span></a>
<a class="sourceLine" id="cb19-12" title="12"><span class="co"># 7. University completed (Bachelor’s degree or higher)</span></a>
<a class="sourceLine" id="cb19-13" title="13"></a>
<a class="sourceLine" id="cb19-14" title="14"><span class="co"># Codificación original Francisco queda stand-by:</span></a>
<a class="sourceLine" id="cb19-15" title="15"></a>
<a class="sourceLine" id="cb19-16" title="16"><span class="co"># #dat99 &lt;- mutate(dat99, educ_rec = car::recode(dat99$educ, &quot;3001:3004 = 1;  = 2;3008=2; 3010 = 3;3007 = 4&quot;))</span></a>
<a class="sourceLine" id="cb19-17" title="17"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3001:3004 ] &lt;- 1</span></a>
<a class="sourceLine" id="cb19-18" title="18"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3005:3006 ] &lt;- 2</span></a>
<a class="sourceLine" id="cb19-19" title="19"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3008] &lt;- 2</span></a>
<a class="sourceLine" id="cb19-20" title="20"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3010] &lt;- 3</span></a>
<a class="sourceLine" id="cb19-21" title="21"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3007] &lt;- 4</span></a>
<a class="sourceLine" id="cb19-22" title="22"></a>
<a class="sourceLine" id="cb19-23" title="23"></a>
<a class="sourceLine" id="cb19-24" title="24">edcl99 &lt;-<span class="st"> </span>cl99 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(degree) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">educ_rec=</span><span class="kw">rec</span>(degree,<span class="dt">rec =</span> <span class="st">&quot;1:4=1; 5=2 ; 6=3 ; 7=4&quot;</span>))</a>
<a class="sourceLine" id="cb19-25" title="25"></a>
<a class="sourceLine" id="cb19-26" title="26"><span class="kw">names</span>(dat99)</a></code></pre></div>
<pre><code>## [1] &quot;salperobr&quot;  &quot;saljusobr&quot;  &quot;salperger&quot;  &quot;saljusger&quot;  &quot;gap_perc&quot;  
## [6] &quot;lngap_perc&quot; &quot;gap_just&quot;   &quot;lngap_just&quot;</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">dat99&lt;-<span class="kw">cbind</span>(dat99,edcl99 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(educ_rec)) <span class="co"># add educ to table</span></a>
<a class="sourceLine" id="cb21-2" title="2"></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="kw">summary</span>(dat99)</a></code></pre></div>
<pre><code>##    salperobr        saljusobr           salperger        
##  Min.   : 45000   Min.   :    50000   Min.   :   300000  
##  1st Qu.: 90000   1st Qu.:   150000   1st Qu.:  1500000  
##  Median : 90000   Median :   200000   Median :  3000000  
##  Mean   :102527   Mean   :   778495   Mean   :  6496250  
##  3rd Qu.:100000   3rd Qu.:   200000   3rd Qu.:  6000000  
##  Max.   :800000   Max.   :300000000   Max.   :100000000  
##  NA&#39;s   :318      NA&#39;s   :322         NA&#39;s   :583        
##    saljusger            gap_perc         lngap_perc    
##  Min.   :   160000   Min.   :   2.50   Min.   :0.9163  
##  1st Qu.:  1000000   1st Qu.:  15.00   1st Qu.:2.7081  
##  Median :  2000000   Median :  33.33   Median :3.5066  
##  Mean   :  4306460   Mean   :  69.55   Mean   :3.5403  
##  3rd Qu.:  4000000   3rd Qu.:  66.67   3rd Qu.:4.1997  
##  Max.   :600000000   Max.   :1250.00   Max.   :7.1309  
##  NA&#39;s   :647         NA&#39;s   :612       NA&#39;s   :612     
##     gap_just           lngap_just        educ_rec    
##  Min.   :   0.0188   Min.   :-3.977   Min.   :1.000  
##  1st Qu.:   5.3333   1st Qu.: 1.674   1st Qu.:1.000  
##  Median :  10.0000   Median : 2.303   Median :1.000  
##  Mean   :  24.5541   Mean   : 2.419   Mean   :1.639  
##  3rd Qu.:  22.2222   3rd Qu.: 3.101   3rd Qu.:2.000  
##  Max.   :2000.0000   Max.   : 7.601   Max.   :4.000  
##  NA&#39;s   :655         NA&#39;s   :655      NA&#39;s   :17</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1">dat99 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(educ_rec) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">m=</span><span class="kw">median</span>(gap_perc, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   educ_rec     m
##      &lt;dbl&gt; &lt;dbl&gt;
## 1        1  25  
## 2        2  37.5
## 3        3  50  
## 4        4  50  
## 5       NA  16.7</code></pre>
</div>
<div id="c-income-1999" class="section level3">
<h3><span class="header-section-number">1.3.4</span> c-income 1999</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">find_var</span>(cl99,<span class="st">&quot;income&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># v21: perceived worker, v31 just worker</span></a></code></pre></div>
<pre><code>##   col.nr var.name                                var.label
## 1    104  incomer                             Famiy income
## 2    105 rincomer R: Earnings II: categories              
## 3    133   income                            Family income
## 4    134  rincome               R: Earnings II: categories
## 5     11      v11  Differences in income are necessary    
## 6     34      v34  Differences in income are too large    
## 7     35      v35  Gov. must reduce differences in income</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">freq</span>(cl99<span class="op">$</span>incomer) <span class="co"># deciles family</span></a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre><code>## Famiy income 
##       Frequency Percent
## 1           296  19.694
## 2           196  13.041
## 3           120   7.984
## 4           104   6.919
## 5           100   6.653
## 6            71   4.724
## 7            94   6.254
## 8            99   6.587
## 9           118   7.851
## 10           92   6.121
## 98           88   5.855
## 99          125   8.317
## Total      1503 100.000</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1"><span class="kw">freq</span>(cl99<span class="op">$</span>rincomer) <span class="co"># 10 categories respondent, more missings</span></a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-5-2.png" width="672" /></p>
<pre><code>## R: Earnings II: categories               
##       Frequency Percent
## 0           413  27.478
## 1           378  25.150
## 2           142   9.448
## 3            75   4.990
## 4            76   5.057
## 5            71   4.724
## 6            44   2.927
## 7            36   2.395
## 8            40   2.661
## 9            53   3.526
## 10           28   1.863
## 98           36   2.395
## 99          111   7.385
## Total      1503 100.000</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1"><span class="kw">freq</span>(cl99<span class="op">$</span>income) <span class="co"># 14 categories family</span></a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-5-3.png" width="672" /></p>
<pre><code>## Family income 
##        Frequency  Percent
## 1            296  19.6939
## 2            196  13.0406
## 3            120   7.9840
## 4            104   6.9195
## 5            100   6.6534
## 6             71   4.7239
## 7             94   6.2542
## 8             99   6.5868
## 9            118   7.8510
## 10            53   3.5263
## 11            14   0.9315
## 12            12   0.7984
## 13             5   0.3327
## 14             8   0.5323
## 999998        88   5.8550
## 999999       125   8.3167
## Total       1503 100.0000</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1"><span class="kw">freq</span>(cl99<span class="op">$</span>rincome) <span class="co"># categories respondent</span></a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-5-4.png" width="672" /></p>
<pre><code>## R: Earnings II: categories 
##        Frequency  Percent
## 0            413  27.4784
## 1            378  25.1497
## 2            142   9.4478
## 3             75   4.9900
## 4             76   5.0566
## 5             71   4.7239
## 6             44   2.9275
## 7             36   2.3952
## 8             40   2.6613
## 9             53   3.5263
## 10            16   1.0645
## 11             4   0.2661
## 12             5   0.3327
## 14             3   0.1996
## 999998        36   2.3952
## 999999       111   7.3852
## Total       1503 100.0000</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1"><span class="co"># take income, impute middle range, then divide by persons in household, then deciles</span></a>
<a class="sourceLine" id="cb35-2" title="2"></a>
<a class="sourceLine" id="cb35-3" title="3">cl99<span class="op">$</span>income_c=<span class="st"> </span><span class="kw">rec</span>(cl99<span class="op">$</span>income,<span class="dt">rec =</span></a>
<a class="sourceLine" id="cb35-4" title="4">      <span class="st">&quot;1=45000;</span></a>
<a class="sourceLine" id="cb35-5" title="5"><span class="st">      2=105500;</span></a>
<a class="sourceLine" id="cb35-6" title="6"><span class="st">      3=135500;</span></a>
<a class="sourceLine" id="cb35-7" title="7"><span class="st">      4=165500;</span></a>
<a class="sourceLine" id="cb35-8" title="8"><span class="st">      5=195500;</span></a>
<a class="sourceLine" id="cb35-9" title="9"><span class="st">      6=225500;</span></a>
<a class="sourceLine" id="cb35-10" title="10"><span class="st">      7=265500;</span></a>
<a class="sourceLine" id="cb35-11" title="11"><span class="st">      8=240500;</span></a>
<a class="sourceLine" id="cb35-12" title="12"><span class="st">      9=495500;</span></a>
<a class="sourceLine" id="cb35-13" title="13"><span class="st">      10=800500;</span></a>
<a class="sourceLine" id="cb35-14" title="14"><span class="st">      11=1250000;</span></a>
<a class="sourceLine" id="cb35-15" title="15"><span class="st">      12=1750000;</span></a>
<a class="sourceLine" id="cb35-16" title="16"><span class="st">      13=2500000;</span></a>
<a class="sourceLine" id="cb35-17" title="17"><span class="st">      14=4000000;</span></a>
<a class="sourceLine" id="cb35-18" title="18"><span class="st">      999998=NA;</span></a>
<a class="sourceLine" id="cb35-19" title="19"><span class="st">      999999=NA&quot;</span>)</a></code></pre></div>
<pre><code>## One or more of the old values are recoded into identical new values.
## Please check if you correctly specified the recode-pattern,
## else separate multiple values with comma, e.g. rec=&quot;a,b,c=1; d,e,f=2&quot;.</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">freq</span>(cl99<span class="op">$</span>income_c) <span class="co"># ok</span></a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-5-5.png" width="672" /></p>
<pre><code>## Family income 
##         Frequency  Percent Valid Percent
## 45000         296  19.6939       22.9457
## 105500        196  13.0406       15.1938
## 135500        120   7.9840        9.3023
## 165500        104   6.9195        8.0620
## 195500        100   6.6534        7.7519
## 225500         71   4.7239        5.5039
## 240500         99   6.5868        7.6744
## 265500         94   6.2542        7.2868
## 495500        118   7.8510        9.1473
## 800500         53   3.5263        4.1085
## 1250000        14   0.9315        1.0853
## 1750000        12   0.7984        0.9302
## 2500000         5   0.3327        0.3876
## 4000000         8   0.5323        0.6202
## NA&#39;s          213  14.1717              
## Total        1503 100.0000      100.0000</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1"><span class="kw">find_var</span>(cl99,<span class="st">&quot;household&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># persons in household</span></a></code></pre></div>
<pre><code>##   col.nr var.name                                var.label
## 1    101   hompop How many persons in household           
## 2    102  hhcycle Household cycle</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1"><span class="kw">freq</span>(cl99<span class="op">$</span>hompop)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-5-6.png" width="672" /></p>
<pre><code>## How many persons in household            
##       Frequency   Percent
## 1           123   8.18363
## 2           235  15.63540
## 3           295  19.62741
## 4           314  20.89155
## 5           253  16.83300
## 6           139   9.24817
## 7            73   4.85695
## 8            44   2.92748
## 9            14   0.93147
## 10            3   0.19960
## 11            4   0.26613
## 12            1   0.06653
## 13            2   0.13307
## 15            1   0.06653
## 17            1   0.06653
## 23            1   0.06653
## Total      1503 100.00000</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1">dat99<span class="op">$</span>ingreso_pc=<span class="st"> </span>cl99<span class="op">$</span>income_c<span class="op">/</span>cl99<span class="op">$</span>hompop</a>
<a class="sourceLine" id="cb43-2" title="2"></a>
<a class="sourceLine" id="cb43-3" title="3"><span class="co"># Generar quintiles de ingreso</span></a>
<a class="sourceLine" id="cb43-4" title="4"></a>
<a class="sourceLine" id="cb43-5" title="5">dat99 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Quint =</span> <span class="kw">ntile</span>(ingreso_pc,<span class="dv">5</span>)) -&gt;<span class="st"> </span>dat99</a>
<a class="sourceLine" id="cb43-6" title="6"></a>
<a class="sourceLine" id="cb43-7" title="7"><span class="co"># Check</span></a>
<a class="sourceLine" id="cb43-8" title="8"><span class="kw">freq</span>( dat99<span class="op">$</span>Quint)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-5-7.png" width="672" /></p>
<pre><code>## dat99$Quint 
##       Frequency Percent Valid Percent
## 1           258   17.17            20
## 2           258   17.17            20
## 3           258   17.17            20
## 4           258   17.17            20
## 5           258   17.17            20
## NA&#39;s        213   14.17              
## Total      1503  100.00           100</code></pre>
</div>
<div id="d---redistribution-1999" class="section level3">
<h3><span class="header-section-number">1.3.5</span> d - redistribution 1999</h3>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1"><span class="kw">find_var</span>(cl99,<span class="st">&quot;income&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># v35</span></a></code></pre></div>
<pre><code>##   col.nr var.name                                var.label
## 1    104  incomer                             Famiy income
## 2    105 rincomer R: Earnings II: categories              
## 3    133   income                            Family income
## 4    134  rincome               R: Earnings II: categories
## 5    141 income_c                            Family income
## 6     11      v11  Differences in income are necessary    
## 7     34      v34  Differences in income are too large    
## 8     35      v35  Gov. must reduce differences in income</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1"><span class="kw">freq</span>(cl99<span class="op">$</span>v35)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre><code>## Gov. must reduce differences in income  
##       Frequency  Percent
## 1           380  25.2828
## 2           736  48.9687
## 3           182  12.1091
## 4           121   8.0506
## 5            13   0.8649
## 8            65   4.3247
## 9             6   0.3992
## Total      1503 100.0000</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1"><span class="kw">get_labels</span>(cl99<span class="op">$</span>v35,<span class="dt">values =</span> <span class="st">&quot;as.name&quot;</span>)</a></code></pre></div>
<pre><code>##                            1                            2 
##             &quot;Strongly agree&quot;                      &quot;Agree&quot; 
##                            3                            4 
## &quot;Neither agree nor disagree&quot;                   &quot;Disagree&quot; 
##                            5                            8 
##          &quot;Strongly disagree&quot;                &quot;Cant choose&quot; 
##                            9 
##                  &quot;No answer&quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1">dat99<span class="op">$</span>redis &lt;-<span class="kw">rec</span>(cl99<span class="op">$</span>v35, <span class="dt">rec=</span><span class="st">&quot;8:9=NA;else=copy&quot;</span>)</a>
<a class="sourceLine" id="cb51-2" title="2">dat99<span class="op">$</span>redis &lt;-<span class="kw">rec</span>(dat99<span class="op">$</span>redis, <span class="dt">rec=</span><span class="st">&quot;rev&quot;</span>)</a>
<a class="sourceLine" id="cb51-3" title="3"><span class="kw">freq</span>(dat99<span class="op">$</span>redis)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-6-2.png" width="672" /></p>
<pre><code>## Gov. must reduce differences in income  
##       Frequency  Percent Valid Percent
## 1            13   0.8649        0.9078
## 2           121   8.0506        8.4497
## 3           182  12.1091       12.7095
## 4           736  48.9687       51.3966
## 5           380  25.2828       26.5363
## NA&#39;s         71   4.7239              
## Total      1503 100.0000      100.0000</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1">dat99<span class="op">$</span>redis &lt;-<span class="kw">set_labels</span>(dat99<span class="op">$</span>redis,<span class="dt">labels=</span> <span class="kw">c</span>(<span class="st">&quot;Muy en desacuerdo&quot;</span>=<span class="dv">1</span>, <span class="st">&quot;En descacuerdo&quot;</span>=<span class="dv">2</span>,<span class="st">&quot;Ni acuerdo ni desacuerdo&quot;</span>=<span class="dv">3</span>, <span class="st">&quot;De acuerdo&quot;</span>=<span class="dv">4</span>, <span class="st">&quot;Muy de acuerdo&quot;</span>=<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb53-2" title="2"><span class="kw">get_labels</span>(dat99<span class="op">$</span>redis, <span class="dt">values=</span><span class="st">&quot;as.name&quot;</span>)</a></code></pre></div>
<pre><code>##                          1                          2 
##        &quot;Muy en desacuerdo&quot;           &quot;En descacuerdo&quot; 
##                          3                          4 
## &quot;Ni acuerdo ni desacuerdo&quot;               &quot;De acuerdo&quot; 
##                          5 
##           &quot;Muy de acuerdo&quot;</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"><span class="co">#dummy redis</span></a>
<a class="sourceLine" id="cb55-2" title="2">dat99<span class="op">$</span>redis_dummy&lt;-<span class="kw">ifelse</span>(dat99<span class="op">$</span>redis<span class="op">&gt;</span><span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb55-3" title="3">dat99<span class="op">$</span>redis_dummy &lt;-<span class="kw">set_labels</span>(dat99<span class="op">$</span>redis_dummy,<span class="dt">labels=</span> <span class="kw">c</span>(<span class="st">&quot;En desacuerdo&quot;</span>=<span class="dv">0</span>, <span class="st">&quot;De acuerdo&quot;</span>=<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb55-4" title="4"><span class="kw">freq</span>(dat99<span class="op">$</span>redis_dummy)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-6-3.png" width="672" /></p>
<pre><code>## dat99$redis_dummy 
##       Frequency Percent Valid Percent
## 0           316  21.025         22.07
## 1          1116  74.251         77.93
## NA&#39;s         71   4.724              
## Total      1503 100.000        100.00</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"><span class="kw">freq</span>(<span class="kw">to_label</span>(dat99<span class="op">$</span>redis))</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-6-4.png" width="672" /></p>
<pre><code>## Gov. must reduce differences in income  
##                          Frequency  Percent Valid Percent
## Muy en desacuerdo               13   0.8649        0.9078
## En descacuerdo                 121   8.0506        8.4497
## Ni acuerdo ni desacuerdo       182  12.1091       12.7095
## De acuerdo                     736  48.9687       51.3966
## Muy de acuerdo                 380  25.2828       26.5363
## NA&#39;s                            71   4.7239              
## Total                         1503 100.0000      100.0000</code></pre>
</div>
<div id="e---estatus-subjetivo" class="section level3">
<h3><span class="header-section-number">1.3.6</span> e - estatus subjetivo</h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1"><span class="kw">table</span>(cl99<span class="op">$</span>v46)</a></code></pre></div>
<pre><code>## 
##   1   2   3   4   5   6   7   8   9  10 
##   4   6  26  46 279 236 249 272 188 197</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" title="1">cl99<span class="op">$</span>v46 &lt;-<span class="st"> </span>car<span class="op">::</span><span class="kw">recode</span>(cl99<span class="op">$</span>v46,<span class="st">&quot;c(97,98,99)=NA&quot;</span>,<span class="dt">as.numeric =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb61-2" title="2">cl99<span class="op">$</span>v46 &lt;-<span class="st"> </span>sjmisc<span class="op">::</span><span class="kw">rec</span>(cl99<span class="op">$</span>v46,<span class="dt">rec=</span><span class="st">&quot;rev&quot;</span>)</a>
<a class="sourceLine" id="cb61-3" title="3"><span class="kw">freq</span>(cl99<span class="op">$</span>v46) <span class="co"># OK esatus subjetivo 1999</span></a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre><code>## Yourself on a scale from top to bottom  
##       Frequency  Percent
## 4           197  13.1071
## 5           188  12.5083
## 6           272  18.0971
## 7           249  16.5669
## 8           236  15.7019
## 9           279  18.5629
## 10           46   3.0605
## 97           26   1.7299
## 98            6   0.3992
## 99            4   0.2661
## Total      1503 100.0000</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1">dat99<span class="op">$</span>ess &lt;-<span class="st"> </span>cl99<span class="op">$</span>v46 <span class="co"># save estatus subjetivo en dat99</span></a></code></pre></div>
</div>
<div id="save-99-data" class="section level3">
<h3><span class="header-section-number">1.3.7</span> Save 99 data</h3>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1"><span class="kw">save</span>(dat99,<span class="dt">file =</span> <span class="st">&quot;input/data/processed/dat99.RData&quot;</span>)</a>
<a class="sourceLine" id="cb64-2" title="2"><span class="kw">names</span>(dat99)</a></code></pre></div>
<pre><code>##  [1] &quot;salperobr&quot;   &quot;saljusobr&quot;   &quot;salperger&quot;   &quot;saljusger&quot;   &quot;gap_perc&quot;   
##  [6] &quot;lngap_perc&quot;  &quot;gap_just&quot;    &quot;lngap_just&quot;  &quot;educ_rec&quot;    &quot;ingreso_pc&quot; 
## [11] &quot;Quint&quot;       &quot;redis&quot;       &quot;redis_dummy&quot; &quot;ess&quot;</code></pre>
</div>
</div>
<div id="year-2009" class="section level2">
<h2><span class="header-section-number">1.4</span> Year 2009</h2>
<div id="load-data-2009" class="section level3">
<h3><span class="header-section-number">1.4.1</span> Load data 2009</h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1"><span class="kw">load</span>(<span class="st">&quot;input/data/intermediate/cl09.RData&quot;</span>) <span class="co"># cl09</span></a></code></pre></div>
</div>
<div id="a--salaries-perceived-just-worker-manager-2009" class="section level3">
<h3><span class="header-section-number">1.4.2</span> a- salaries perceived &amp; just worker &amp; manager 2009</h3>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1"><span class="co"># Find vars</span></a>
<a class="sourceLine" id="cb67-2" title="2"></a>
<a class="sourceLine" id="cb67-3" title="3"><span class="kw">find_var</span>(cl09,<span class="st">&quot;worker&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># v25: perceived worker, v30 just worker unrecoded</span></a></code></pre></div>
<pre><code>##    col.nr var.name
## 1      27      v25
## 2      32      v30
## 3      44      v42
## 4      59      v57
## 5      62      v60
## 6      65      v63
## 7      67      v65
## 8      71      v69
## 9      72      v70
## 10     73      v71
## 11     74      v72
## 12    133   isco88
## 13    139 spisco88
##                                                                           var.label
## 1  Q4d Actually earn: How much do you think an unskilled worker in a factory earns?
## 2  Q5d Should earn: How much do you think an unskilled worker in a factory should e
## 3                                    Q9c Conflicts: between management and workers?
## 4    Q15b When you were [14-15-16] years old, what kind of work did your father do?
## 5    Q16c When you were [14-15-16] years old, what kind of work did your mother do?
## 6                            Q18b In this first job, what was your main occupation?
## 7             Q19b [ISCO88]: And in your current job, what is your main occupation?
## 8       Q22a Which type of job did your father have when you were [14-15-16] years?
## 9       Q22b Which type of job did your mother have when you were [14-15-16] years?
## 10 Q23a Which type of job did you have in your first job - after leaving full-time 
## 11          Q23b And which type of job do you have now in your current or last job?
## 12                                              R: Occupation ILO,ISCO 1988 4-digit
## 13                                Spouse, partner: Occupation ILO,ISCO 1988 4-digit</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1"><span class="kw">find_var</span>(cl09,<span class="st">&quot;chairman&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># v23: perceived chairman, v28 just chairman unrecoded</span></a></code></pre></div>
<pre><code>##   col.nr var.name
## 1     25      v23
## 2     30      v28
##                                                                          var.label
## 1 Q4b Actually earn: How much do you think a chairman of a large national corporat
## 2 Q5b Should earn: How much do you think a chairman of a large national company sh</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1"><span class="co"># Create object with vars &amp; rename</span></a>
<a class="sourceLine" id="cb71-2" title="2"></a>
<a class="sourceLine" id="cb71-3" title="3">dat09 &lt;-<span class="st"> </span>cl09 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(v25,v30,v23,v28) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename</span>(<span class="dt">salperger=</span>v23,</a>
<a class="sourceLine" id="cb71-4" title="4">               <span class="dt">salperobr=</span>v25,</a>
<a class="sourceLine" id="cb71-5" title="5">               <span class="dt">saljusger=</span>v28,</a>
<a class="sourceLine" id="cb71-6" title="6">               <span class="dt">saljusobr=</span>v30)</a>
<a class="sourceLine" id="cb71-7" title="7"></a>
<a class="sourceLine" id="cb71-8" title="8"><span class="co"># Recodes</span></a>
<a class="sourceLine" id="cb71-9" title="9"><span class="kw">stargazer</span>(dat09, <span class="dt">type=</span><span class="st">&quot;text&quot;</span>)</a></code></pre></div>
<pre><code>## 
## =================================================================================
## Statistic   N       Mean         St. Dev.    Min Pctl(25)   Pctl(75)      Max    
## ---------------------------------------------------------------------------------
## salperobr 1,505  176,822.100   127,474.700   -99  150,000   200,000    3,000,000 
## saljusobr 1,505  371,163.400  1,072,036.000  -99  250,000   380,000   25,000,000 
## salperger 1,505 9,991,082.000 21,161,019.000 -99 2,000,000 10,000,000 400,000,000
## saljusger 1,505 5,524,310.000 14,224,452.000 -99 1,000,000 5,000,000  400,000,000
## ---------------------------------------------------------------------------------</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1">dat09[][dat09  <span class="op">&gt;=</span><span class="st"> </span><span class="dv">99999999998</span>] &lt;-<span class="st"> </span><span class="ot">NA</span> <span class="co"># missings</span></a>
<a class="sourceLine" id="cb73-2" title="2"></a>
<a class="sourceLine" id="cb73-3" title="3">dat09 &lt;-<span class="st"> </span>dat09 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">salperobr=</span><span class="kw">replace</span>(salperobr, salperobr <span class="op">&lt;=</span><span class="st"> </span><span class="dv">40000</span> <span class="op">|</span><span class="st"> </span>salperobr<span class="op">&gt;=</span><span class="st"> </span><span class="dv">1000000</span>, <span class="ot">NA</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">salperger=</span><span class="kw">replace</span>(salperger, salperger <span class="op">&lt;=</span><span class="st"> </span><span class="dv">250000</span> <span class="op">|</span><span class="st"> </span>salperger<span class="op">&gt;=</span><span class="st"> </span><span class="dv">100000001</span>, <span class="ot">NA</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">saljusobr=</span><span class="kw">replace</span>(saljusobr, saljusobr <span class="op">&lt;=</span><span class="st"> </span><span class="dv">40000</span>, <span class="ot">NA</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">saljusger=</span><span class="kw">replace</span>(saljusger, saljusger <span class="op">&lt;=</span><span class="st"> </span><span class="dv">100000</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb73-8" title="8"></a>
<a class="sourceLine" id="cb73-9" title="9"><span class="co">#---Brecha salarial percibida</span></a>
<a class="sourceLine" id="cb73-10" title="10">dat09<span class="op">$</span>gap_perc   &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(dat09<span class="op">$</span>salperger<span class="op">/</span>dat09<span class="op">$</span>salperobr) <span class="co"># diferencia total</span></a>
<a class="sourceLine" id="cb73-11" title="11">dat09<span class="op">$</span>lngap_perc &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(<span class="kw">log</span>(dat09<span class="op">$</span>gap_perc))                 <span class="co"># diferencia log</span></a>
<a class="sourceLine" id="cb73-12" title="12"></a>
<a class="sourceLine" id="cb73-13" title="13"><span class="co">#---Brecha salarial justa</span></a>
<a class="sourceLine" id="cb73-14" title="14">dat09<span class="op">$</span>gap_just   &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(dat09<span class="op">$</span>saljusger<span class="op">/</span>dat09<span class="op">$</span>saljusobr) <span class="co"># diferencia total</span></a>
<a class="sourceLine" id="cb73-15" title="15">dat09<span class="op">$</span>lngap_just &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(<span class="kw">log</span>(dat09<span class="op">$</span>gap_just))                <span class="co"># diferencia log</span></a>
<a class="sourceLine" id="cb73-16" title="16"><span class="kw">dim</span>(<span class="kw">na.omit</span>(dat09))</a></code></pre></div>
<pre><code>## [1] 1262    8</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" title="1"><span class="kw">stargazer</span>(dat09, <span class="dt">type=</span><span class="st">&quot;text&quot;</span>)</a></code></pre></div>
<pre><code>## 
## =======================================================================================================
## Statistic    N        Mean         St. Dev.        Min       Pctl(25)       Pctl(75)          Max      
## -------------------------------------------------------------------------------------------------------
## salperobr  1,419  181,636.700     61,462.730   50,000.000   150,000.000   200,000.000     800,000.000  
## saljusobr  1,426  391,600.300   1,097,729.000  80,000.000   250,000.000   400,000.000   25,000,000.000 
## salperger  1,330 10,065,000.000 14,464,905.000 300,000.000 3,000,000.000 10,000,000.000 100,000,000.000
## saljusger  1,310 6,346,388.000  15,075,037.000 120,000.000 2,000,000.000 6,000,000.000  400,000,000.000
## gap_perc   1,305     60.026         91.505        1.333       16.667         66.667         750.000    
## lngap_perc 1,305     3.499          1.056         0.288        2.813         4.200           6.620     
## gap_just   1,291     20.974         46.658        0.160        5.310         20.000        1,000.000   
## lngap_just 1,291     2.401          1.071        -1.833        1.670         2.996           6.908     
## -------------------------------------------------------------------------------------------------------</code></pre>
</div>
<div id="b---education-2009" class="section level3">
<h3><span class="header-section-number">1.4.3</span> b - education 2009</h3>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1"><span class="co"># Find vars</span></a>
<a class="sourceLine" id="cb77-2" title="2"></a>
<a class="sourceLine" id="cb77-3" title="3"><span class="co">##sjPlot::view_df(cl09, show.frq = T)</span></a>
<a class="sourceLine" id="cb77-4" title="4"></a>
<a class="sourceLine" id="cb77-5" title="5"><span class="kw">find_var</span>(cl09,<span class="st">&quot;degr&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># cl_degr:</span></a></code></pre></div>
<pre><code>##    col.nr var.name                                          var.label
## 1      89   degree            R: Education II-highest education level
## 2      90  ar_degr              Country specific education: Argentina
## 3      91  at_degr                Country specific education: Austria
## 4      92  au_degr              Country specific education: Australia
## 5      93  be_degr       Country specific education: Belgium (BE-FLA)
## 6      94  bg_degr               Country specific education: Bulgaria
## 7      95  ch_degr            Country specific education: Switzerland
## 8      96  cl_degr                  Country specific education: Chile
## 9      97  cn_degr                  Country specific education: China
## 10     98  cy_degr                 Country specific education: Cyprus
## 11     99  cz_degr         Country specific education: Czech Republic
## 12    100  de_degr                Country specific education: Germany
## 13    101  dk_degr                Country specific education: Denmark
## 14    102  ee_degr                Country specific education: Estonia
## 15    103  es_degr                  Country specific education: Spain
## 16    104  fi_degr                Country specific education: Finland
## 17    105  fr_degr                 Country specific education: France
## 18    106  gb_degr Country specific education: Great Britain (GB-GBN)
## 19    107  hr_degr                Country specific education: Croatia
## 20    108  hu_degr                Country specific education: Hungary
## 21    109  il_degr                 Country specific education: Israel
## 22    110  is_degr                Country specific education: Iceland
## 23    111  it_degr                  Country specific education: Italy
## 24    112  jp_degr                  Country specific education: Japan
## 25    113  kr_degr            Country specific education: South Korea
## 26    114  lt_degr              Country specific education: Lithuania
## 27    115  lv_degr                 Country specific education: Latvia
## 28    116  no_degr                 Country specific education: Norway
## 29    117  nz_degr            Country specific education: New Zealand
## 30    118  ph_degr            Country specific education: Philippines
## 31    119  pl_degr                 Country specific education: Poland
## 32    120  pt_degr               Country specific education: Portugal
## 33    121  ru_degr                 Country specific education: Russia
## 34    122  se_degr                 Country specific education: Sweden
## 35    123  si_degr               Country specific education: Slovenia
## 36    124  sk_degr               Country specific education: Slovakia
## 37    125  tr_degr                 Country specific education: Turkey
## 38    126  tw_degr                 Country specific education: Taiwan
## 39    127  ua_degr                Country specific education: Ukraine
## 40    128  us_degr          Country specific education: United States
## 41    129  ve_degr              Country specific education: Venezuela
## 42    130  za_degr           Country specific education: South Africa</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1"><span class="kw">frq</span>(<span class="kw">as.factor</span>(cl09<span class="op">$</span>cl_degr))</a></code></pre></div>
<pre><code>## 
## x &lt;categorical&gt;
## # total N=1505  valid N=1505  mean=5.12  sd=7.20
## 
##  val frq raw.prc valid.prc cum.prc
##    1  44    2.92      2.92    2.92
##    2 286   19.00     19.00   21.93
##    3 190   12.62     12.62   34.55
##    4 196   13.02     13.02   47.57
##    5 368   24.45     24.45   72.03
##    6  82    5.45      5.45   77.48
##    7 160   10.63     10.63   88.11
##    8  54    3.59      3.59   91.69
##    9 117    7.77      7.77   99.47
##   99   8    0.53      0.53  100.00
##   NA   0    0.00        NA      NA</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1"><span class="co"># Problema: no se encuentran los codigos originales en codebook, se derivan de la pregunta father education v317, que tiene las 7 categorías unesco asumiendo que las 7 de degree son las mismas:</span></a>
<a class="sourceLine" id="cb81-2" title="2"></a>
<a class="sourceLine" id="cb81-3" title="3"><span class="co"># 1. None</span></a>
<a class="sourceLine" id="cb81-4" title="4"><span class="co"># 2. Incomplete primary</span></a>
<a class="sourceLine" id="cb81-5" title="5"><span class="co"># 3. Primary completed</span></a>
<a class="sourceLine" id="cb81-6" title="6"><span class="co"># 4. Incomplete secondary (also includes completed qualifications at a level below academic secondary school</span></a>
<a class="sourceLine" id="cb81-7" title="7"><span class="co"># completion – for example skilled manual qualifications given by trade schools.)</span></a>
<a class="sourceLine" id="cb81-8" title="8"><span class="co"># 5. Secondary completed</span></a>
<a class="sourceLine" id="cb81-9" title="9"><span class="co"># 6. Some tertiary education but less than a university Bachelor’s degree (Includes incomplete university. Also</span></a>
<a class="sourceLine" id="cb81-10" title="10"><span class="co"># includes completed post-secondary courses below university Bachelor’s degree level. Examples are qualifications</span></a>
<a class="sourceLine" id="cb81-11" title="11"><span class="co"># from US junior college, polytechnical institutes in many countries, and other similar post-secondary education.)</span></a>
<a class="sourceLine" id="cb81-12" title="12"><span class="co"># 7. University completed (Bachelor’s degree or higher)</span></a>
<a class="sourceLine" id="cb81-13" title="13"></a>
<a class="sourceLine" id="cb81-14" title="14"><span class="co"># Codificación original Francisco queda stand-by:</span></a>
<a class="sourceLine" id="cb81-15" title="15"></a>
<a class="sourceLine" id="cb81-16" title="16"><span class="co"># #dat99 &lt;- mutate(dat99, educ_rec = car::recode(dat99$educ, &quot;3001:3004 = 1;  = 2;3008=2; 3010 = 3;3007 = 4&quot;))</span></a>
<a class="sourceLine" id="cb81-17" title="17"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3001:3004 ] &lt;- 1</span></a>
<a class="sourceLine" id="cb81-18" title="18"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3005:3006 ] &lt;- 2</span></a>
<a class="sourceLine" id="cb81-19" title="19"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3008] &lt;- 2</span></a>
<a class="sourceLine" id="cb81-20" title="20"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3010] &lt;- 3</span></a>
<a class="sourceLine" id="cb81-21" title="21"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3007] &lt;- 4</span></a>
<a class="sourceLine" id="cb81-22" title="22"></a>
<a class="sourceLine" id="cb81-23" title="23">edcl09 &lt;-<span class="st"> </span>cl09 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(cl_degr) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">educ_rec=</span><span class="kw">rec</span>(cl_degr,<span class="dt">rec =</span> <span class="st">&quot;1:4=1; 5:6=2; 8=2 ; 9=3 ; 7=4&quot;</span>))</a></code></pre></div>
<pre><code>## One or more of the old values are recoded into identical new values.
## Please check if you correctly specified the recode-pattern,
## else separate multiple values with comma, e.g. rec=&quot;a,b,c=1; d,e,f=2&quot;.</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" title="1"><span class="kw">names</span>(edcl09)</a></code></pre></div>
<pre><code>## [1] &quot;cl_degr&quot;  &quot;educ_rec&quot;</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" title="1">dat09&lt;-<span class="kw">cbind</span>(dat09,edcl09 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(educ_rec)) <span class="co"># add educ to table</span></a>
<a class="sourceLine" id="cb85-2" title="2"></a>
<a class="sourceLine" id="cb85-3" title="3"><span class="kw">summary</span>(dat09)</a></code></pre></div>
<pre><code>##    salperobr        saljusobr          salperger        
##  Min.   : 50000   Min.   :   80000   Min.   :   300000  
##  1st Qu.:150000   1st Qu.:  250000   1st Qu.:  3000000  
##  Median :160000   Median :  300000   Median :  5000000  
##  Mean   :181637   Mean   :  391600   Mean   : 10065000  
##  3rd Qu.:200000   3rd Qu.:  400000   3rd Qu.: 10000000  
##  Max.   :800000   Max.   :25000000   Max.   :100000000  
##  NA&#39;s   :86       NA&#39;s   :79         NA&#39;s   :175        
##    saljusger            gap_perc         lngap_perc        gap_just      
##  Min.   :   120000   Min.   :  1.333   Min.   :0.2877   Min.   :   0.16  
##  1st Qu.:  2000000   1st Qu.: 16.667   1st Qu.:2.8134   1st Qu.:   5.31  
##  Median :  3000000   Median : 32.000   Median :3.4657   Median :  10.00  
##  Mean   :  6346388   Mean   : 60.026   Mean   :3.4992   Mean   :  20.97  
##  3rd Qu.:  6000000   3rd Qu.: 66.667   3rd Qu.:4.1997   3rd Qu.:  20.00  
##  Max.   :400000000   Max.   :750.000   Max.   :6.6201   Max.   :1000.00  
##  NA&#39;s   :195         NA&#39;s   :200       NA&#39;s   :200      NA&#39;s   :214      
##    lngap_just        educ_rec    
##  Min.   :-1.833   Min.   :1.000  
##  1st Qu.: 1.670   1st Qu.:1.000  
##  Median : 2.303   Median :2.000  
##  Mean   : 2.401   Mean   :1.814  
##  3rd Qu.: 2.996   3rd Qu.:2.000  
##  Max.   : 6.908   Max.   :4.000  
##  NA&#39;s   :214      NA&#39;s   :8</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" title="1">dat09 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(educ_rec) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">m=</span><span class="kw">median</span>(gap_perc, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   educ_rec     m
##      &lt;dbl&gt; &lt;dbl&gt;
## 1        1  27.8
## 2        2  33.3
## 3        3  35  
## 4        4  50  
## 5       NA  27.8</code></pre>
</div>
<div id="c-income-2009" class="section level3">
<h3><span class="header-section-number">1.4.4</span> c-income 2009</h3>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1"><span class="kw">find_var</span>(cl09,<span class="st">&quot;income&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># cl_inc</span></a></code></pre></div>
<pre><code>##    col.nr var.name
## 1      34      v32
## 2      35      v33
## 3      38      v36
## 4      40      v38
## 5      41      v39
## 6     182   ar_inc
## 7     183   at_inc
## 8     184   au_inc
## 9     185   be_inc
## 10    186   bg_inc
## 11    187   ch_inc
## 12    188   cl_inc
## 13    189   cn_inc
## 14    190   cy_inc
## 15    191   cz_inc
## 16    192   de_inc
## 17    193   dk_inc
## 18    194   ee_inc
## 19    195   es_inc
## 20    196   fi_inc
## 21    197   fr_inc
## 22    198   gb_inc
## 23    199   hr_inc
## 24    200   hu_inc
## 25    201   il_inc
## 26    202   is_inc
## 27    203   it_inc
## 28    204   jp_inc
## 29    205   kr_inc
## 30    206   lt_inc
## 31    207   lv_inc
## 32    208   no_inc
## 33    209   nz_inc
## 34    210   ph_inc
## 35    211   pl_inc
## 36    212   pt_inc
## 37    213   ru_inc
## 38    214   se_inc
## 39    215   si_inc
## 40    216   sk_inc
## 41    217   tr_inc
## 42    218   tw_inc
## 43    219   ua_inc
## 44    220   us_inc
## 45    221   ve_inc
## 46    222   za_inc
## 47    141  ar_rinc
## 48    142  at_rinc
## 49    143  au_rinc
## 50    144  be_rinc
## 51    145  bg_rinc
## 52    146  ch_rinc
## 53    148  cn_rinc
## 54    149  cy_rinc
## 55    150  cz_rinc
## 56    151  de_rinc
## 57    153  ee_rinc
## 58    155  fi_rinc
## 59    156  fr_rinc
## 60    157  gb_rinc
## 61    158  hr_rinc
## 62    159  hu_rinc
## 63    160  il_rinc
## 64    162  it_rinc
## 65    163  jp_rinc
## 66    164  kr_rinc
## 67    165  lt_rinc
## 68    166  lv_rinc
## 69    167  no_rinc
## 70    169  ph_rinc
## 71    170  pl_rinc
## 72    172  ru_rinc
## 73    173  se_rinc
## 74    174  si_rinc
## 75    175  sk_rinc
## 76    176  tr_rinc
## 77    177  tw_rinc
## 78    178  ua_rinc
## 79    179  us_rinc
## 80    181  za_rinc
##                                                                           var.label
## 1                          Q6a Differences in income in [Rs country] are too large.
## 2  Q6b It is responsib of governm to reduce differences in income betwn people with
## 3  Q7a Tax: Do you think people with high incomes should pay larger share of their 
## 4  Q8a Just or unjust - that people with higher incomes can buy better health care?
## 5  Q8b Just or unjust - that people with higher incomes can buy better education fo
## 6                                                          Family income: Argentina
## 7                                                            Family income: Austria
## 8                                                          Family income: Australia
## 9                                                   Family income: Belgium (BE-FLA)
## 10                                                          Family income: Bulgaria
## 11                                                       Family income: Switzerland
## 12                                                             Family income: Chile
## 13                                                             Family income: China
## 14                                                            Family income: Cyprus
## 15                                                    Family income: Czech Republic
## 16                                                           Family income: Germany
## 17                                                           Family income: Denmark
## 18                                                           Family income: Estonia
## 19                                                             Family income: Spain
## 20                                                           Family income: Finland
## 21                                                            Family income: France
## 22                                            Family income: Great Britain (GB-GBN)
## 23                                                           Family income: Croatia
## 24                                                           Family income: Hungary
## 25                                                            Family income: Israel
## 26                                                           Family income: Iceland
## 27                                                             Family income: Italy
## 28                                                             Family income: Japan
## 29                                                       Family income: South Korea
## 30                                                         Family income: Lithuania
## 31                                                            Family income: Latvia
## 32                                                            Family income: Norway
## 33                                                       Family income: New Zealand
## 34                                                       Family income: Philippines
## 35                                                            Family income: Poland
## 36                                                          Family income: Portugal
## 37                                                            Family income: Russia
## 38                                                            Family income: Sweden
## 39                                                          Family income: Slovenia
## 40                                                          Family income: Slovakia
## 41                                                            Family income: Turkey
## 42                                                            Family income: Taiwan
## 43                                                           Family income: Ukraine
## 44                                                     Family income: United States
## 45                                                         Family income: Venezuela
## 46                                                      Family income: South Africa
## 47                                                           R: Earnings: Argentina
## 48                                                             R: Earnings: Austria
## 49                                                           R: Earnings: Australia
## 50                                                    R: Earnings: Belgium (BE-FLA)
## 51                                                            R: Earnings: Bulgaria
## 52                                                         R: Earnings: Switzerland
## 53                                                               R: Earnings: China
## 54                                                              R: Earnings: Cyprus
## 55                                                      R: Earnings: Czech Republic
## 56                                                             R: Earnings: Germany
## 57                                                             R: Earnings: Estonia
## 58                                                             R: Earnings: Finland
## 59                                                              R: Earnings: France
## 60                                              R: Earnings: Great Britain (GB-GBN)
## 61                                                             R: Earnings: Croatia
## 62                                                             R: Earnings: Hungary
## 63                                                              R: Earnings: Israel
## 64                                                               R: Earnings: Italy
## 65                                                               R: Earnings: Japan
## 66                                                         R: Earnings: South Korea
## 67                                                           R: Earnings: Lithuania
## 68                                                              R: Earnings: Latvia
## 69                                                              R: Earnings: Norway
## 70                                                         R: Earnings: Philippines
## 71                                                              R: Earnings: Poland
## 72                                                              R: Earnings: Russia
## 73                                                              R: Earnings: Sweden
## 74                                                            R: Earnings: Slovenia
## 75                                                            R: Earnings: Slovakia
## 76                                                              R: Earnings: Turkey
## 77                                                              R: Earnings: Taiwan
## 78                                                             R: Earnings: Ukraine
## 79                                                       R: Earnings: United States
## 80                                                        R: Earnings: South Africa</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" title="1"><span class="kw">freq</span>(cl09<span class="op">$</span>cl_inc) <span class="co"># deciles family</span></a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<pre><code>## Family income: Chile 
##         Frequency  Percent
## 20000          16   1.0631
## 45000          12   0.7973
## 66000          44   2.9236
## 90000          56   3.7209
## 122000         95   6.3123
## 155000        160  10.6312
## 200000        141   9.3688
## 250000        147   9.7674
## 310000        126   8.3721
## 400000        147   9.7674
## 750000        152  10.0997
## 1500000        53   3.5216
## 2500000        20   1.3289
## 3100000        17   1.1296
## 9999998        58   3.8538
## 9999999       261  17.3422
## Total        1505 100.0000</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" title="1"><span class="co"># take income, impute middle range, then divide by persons in household, then deciles</span></a>
<a class="sourceLine" id="cb93-2" title="2"></a>
<a class="sourceLine" id="cb93-3" title="3">cl09<span class="op">$</span>income_c=<span class="st"> </span><span class="kw">rec</span>(cl09<span class="op">$</span>cl_inc,<span class="dt">rec =</span></a>
<a class="sourceLine" id="cb93-4" title="4">      <span class="st">&quot;20000=45000;</span></a>
<a class="sourceLine" id="cb93-5" title="5"><span class="st">      45000=105500;</span></a>
<a class="sourceLine" id="cb93-6" title="6"><span class="st">      66000=135500;</span></a>
<a class="sourceLine" id="cb93-7" title="7"><span class="st">      90000=165500;</span></a>
<a class="sourceLine" id="cb93-8" title="8"><span class="st">      122000=195500;</span></a>
<a class="sourceLine" id="cb93-9" title="9"><span class="st">      155000=225500;</span></a>
<a class="sourceLine" id="cb93-10" title="10"><span class="st">      200000=265500;</span></a>
<a class="sourceLine" id="cb93-11" title="11"><span class="st">      250000=240500;</span></a>
<a class="sourceLine" id="cb93-12" title="12"><span class="st">      310000=495500;</span></a>
<a class="sourceLine" id="cb93-13" title="13"><span class="st">      400000=800500;</span></a>
<a class="sourceLine" id="cb93-14" title="14"><span class="st">      750000=1250000;</span></a>
<a class="sourceLine" id="cb93-15" title="15"><span class="st">      1500000=1750000;</span></a>
<a class="sourceLine" id="cb93-16" title="16"><span class="st">      2500000=2500000;</span></a>
<a class="sourceLine" id="cb93-17" title="17"><span class="st">      3100000=4000000;</span></a>
<a class="sourceLine" id="cb93-18" title="18"><span class="st">      9999998=NA;</span></a>
<a class="sourceLine" id="cb93-19" title="19"><span class="st">      9999999=NA&quot;</span>)</a></code></pre></div>
<pre><code>## One or more of the old values are recoded into identical new values.
## Please check if you correctly specified the recode-pattern,
## else separate multiple values with comma, e.g. rec=&quot;a,b,c=1; d,e,f=2&quot;.</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" title="1"><span class="kw">freq</span>(cl99<span class="op">$</span>income_c) <span class="co"># ok</span></a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-12-2.png" width="672" /></p>
<pre><code>## Family income 
##         Frequency  Percent Valid Percent
## 45000         296  19.6939       22.9457
## 105500        196  13.0406       15.1938
## 135500        120   7.9840        9.3023
## 165500        104   6.9195        8.0620
## 195500        100   6.6534        7.7519
## 225500         71   4.7239        5.5039
## 240500         99   6.5868        7.6744
## 265500         94   6.2542        7.2868
## 495500        118   7.8510        9.1473
## 800500         53   3.5263        4.1085
## 1250000        14   0.9315        1.0853
## 1750000        12   0.7984        0.9302
## 2500000         5   0.3327        0.3876
## 4000000         8   0.5323        0.6202
## NA&#39;s          213  14.1717              
## Total        1503 100.0000      100.0000</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" title="1"><span class="kw">find_var</span>(cl09,<span class="st">&quot;household&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># persons in household</span></a></code></pre></div>
<pre><code>##   col.nr var.name
## 1    223   hompop
## 2     60      v58
## 3     61      v59
## 4    224  hhcycle
##                                                                          var.label
## 1                                                    How many persons in household
## 2 Q16a When you were [14-15-16] years old, did your mother work outside the househ
## 3                            Q16b In her last job - for whom did your mother work?
## 4                                       Household composition: children and adults</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" title="1"><span class="kw">freq</span>(cl09<span class="op">$</span>hompop)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-12-3.png" width="672" /></p>
<pre><code>## How many persons in household 
##       Frequency   Percent
## 1           114   7.57475
## 2           270  17.94020
## 3           337  22.39203
## 4           348  23.12292
## 5           222  14.75083
## 6           113   7.50831
## 7            45   2.99003
## 8            17   1.12957
## 9            17   1.12957
## 10            6   0.39867
## 11            7   0.46512
## 12            4   0.26578
## 13            1   0.06645
## 15            2   0.13289
## 99            2   0.13289
## Total      1505 100.00000</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" title="1">dat09<span class="op">$</span>ingreso_pc=<span class="st"> </span>cl09<span class="op">$</span>income_c<span class="op">/</span>cl09<span class="op">$</span>hompop</a>
<a class="sourceLine" id="cb101-2" title="2"></a>
<a class="sourceLine" id="cb101-3" title="3"><span class="co"># Generar quintiles de ingreso</span></a>
<a class="sourceLine" id="cb101-4" title="4"></a>
<a class="sourceLine" id="cb101-5" title="5">dat09 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Quint =</span> <span class="kw">ntile</span>(ingreso_pc,<span class="dv">5</span>)) -&gt;<span class="st"> </span>dat09</a>
<a class="sourceLine" id="cb101-6" title="6"></a>
<a class="sourceLine" id="cb101-7" title="7"><span class="co"># Check</span></a>
<a class="sourceLine" id="cb101-8" title="8"><span class="kw">freq</span>( dat09<span class="op">$</span>Quint)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-12-4.png" width="672" /></p>
<pre><code>## dat09$Quint 
##       Frequency Percent Valid Percent
## 1           238   15.81         20.07
## 2           237   15.75         19.98
## 3           237   15.75         19.98
## 4           237   15.75         19.98
## 5           237   15.75         19.98
## NA&#39;s        319   21.20              
## Total      1505  100.00        100.00</code></pre>
</div>
<div id="d---redistribution-2009" class="section level3">
<h3><span class="header-section-number">1.4.5</span> d - redistribution 2009</h3>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" title="1"><span class="kw">find_var</span>(cl09,<span class="st">&quot;income&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># v33</span></a></code></pre></div>
<pre><code>##    col.nr var.name
## 1     358 income_c
## 2      34      v32
## 3      35      v33
## 4      38      v36
## 5      40      v38
## 6      41      v39
## 7     182   ar_inc
## 8     183   at_inc
## 9     184   au_inc
## 10    185   be_inc
## 11    186   bg_inc
## 12    187   ch_inc
## 13    188   cl_inc
## 14    189   cn_inc
## 15    190   cy_inc
## 16    191   cz_inc
## 17    192   de_inc
## 18    193   dk_inc
## 19    194   ee_inc
## 20    195   es_inc
## 21    196   fi_inc
## 22    197   fr_inc
## 23    198   gb_inc
## 24    199   hr_inc
## 25    200   hu_inc
## 26    201   il_inc
## 27    202   is_inc
## 28    203   it_inc
## 29    204   jp_inc
## 30    205   kr_inc
## 31    206   lt_inc
## 32    207   lv_inc
## 33    208   no_inc
## 34    209   nz_inc
## 35    210   ph_inc
## 36    211   pl_inc
## 37    212   pt_inc
## 38    213   ru_inc
## 39    214   se_inc
## 40    215   si_inc
## 41    216   sk_inc
## 42    217   tr_inc
## 43    218   tw_inc
## 44    219   ua_inc
## 45    220   us_inc
## 46    221   ve_inc
## 47    222   za_inc
## 48    141  ar_rinc
## 49    142  at_rinc
## 50    143  au_rinc
## 51    144  be_rinc
## 52    145  bg_rinc
## 53    146  ch_rinc
## 54    148  cn_rinc
## 55    149  cy_rinc
## 56    150  cz_rinc
## 57    151  de_rinc
## 58    153  ee_rinc
## 59    155  fi_rinc
## 60    156  fr_rinc
## 61    157  gb_rinc
## 62    158  hr_rinc
## 63    159  hu_rinc
## 64    160  il_rinc
## 65    162  it_rinc
## 66    163  jp_rinc
## 67    164  kr_rinc
## 68    165  lt_rinc
## 69    166  lv_rinc
## 70    167  no_rinc
## 71    169  ph_rinc
## 72    170  pl_rinc
## 73    172  ru_rinc
## 74    173  se_rinc
## 75    174  si_rinc
## 76    175  sk_rinc
## 77    176  tr_rinc
## 78    177  tw_rinc
## 79    178  ua_rinc
## 80    179  us_rinc
## 81    181  za_rinc
##                                                                           var.label
## 1                                                              Family income: Chile
## 2                          Q6a Differences in income in [Rs country] are too large.
## 3  Q6b It is responsib of governm to reduce differences in income betwn people with
## 4  Q7a Tax: Do you think people with high incomes should pay larger share of their 
## 5  Q8a Just or unjust - that people with higher incomes can buy better health care?
## 6  Q8b Just or unjust - that people with higher incomes can buy better education fo
## 7                                                          Family income: Argentina
## 8                                                            Family income: Austria
## 9                                                          Family income: Australia
## 10                                                  Family income: Belgium (BE-FLA)
## 11                                                          Family income: Bulgaria
## 12                                                       Family income: Switzerland
## 13                                                             Family income: Chile
## 14                                                             Family income: China
## 15                                                            Family income: Cyprus
## 16                                                    Family income: Czech Republic
## 17                                                           Family income: Germany
## 18                                                           Family income: Denmark
## 19                                                           Family income: Estonia
## 20                                                             Family income: Spain
## 21                                                           Family income: Finland
## 22                                                            Family income: France
## 23                                            Family income: Great Britain (GB-GBN)
## 24                                                           Family income: Croatia
## 25                                                           Family income: Hungary
## 26                                                            Family income: Israel
## 27                                                           Family income: Iceland
## 28                                                             Family income: Italy
## 29                                                             Family income: Japan
## 30                                                       Family income: South Korea
## 31                                                         Family income: Lithuania
## 32                                                            Family income: Latvia
## 33                                                            Family income: Norway
## 34                                                       Family income: New Zealand
## 35                                                       Family income: Philippines
## 36                                                            Family income: Poland
## 37                                                          Family income: Portugal
## 38                                                            Family income: Russia
## 39                                                            Family income: Sweden
## 40                                                          Family income: Slovenia
## 41                                                          Family income: Slovakia
## 42                                                            Family income: Turkey
## 43                                                            Family income: Taiwan
## 44                                                           Family income: Ukraine
## 45                                                     Family income: United States
## 46                                                         Family income: Venezuela
## 47                                                      Family income: South Africa
## 48                                                           R: Earnings: Argentina
## 49                                                             R: Earnings: Austria
## 50                                                           R: Earnings: Australia
## 51                                                    R: Earnings: Belgium (BE-FLA)
## 52                                                            R: Earnings: Bulgaria
## 53                                                         R: Earnings: Switzerland
## 54                                                               R: Earnings: China
## 55                                                              R: Earnings: Cyprus
## 56                                                      R: Earnings: Czech Republic
## 57                                                             R: Earnings: Germany
## 58                                                             R: Earnings: Estonia
## 59                                                             R: Earnings: Finland
## 60                                                              R: Earnings: France
## 61                                              R: Earnings: Great Britain (GB-GBN)
## 62                                                             R: Earnings: Croatia
## 63                                                             R: Earnings: Hungary
## 64                                                              R: Earnings: Israel
## 65                                                               R: Earnings: Italy
## 66                                                               R: Earnings: Japan
## 67                                                         R: Earnings: South Korea
## 68                                                           R: Earnings: Lithuania
## 69                                                              R: Earnings: Latvia
## 70                                                              R: Earnings: Norway
## 71                                                         R: Earnings: Philippines
## 72                                                              R: Earnings: Poland
## 73                                                              R: Earnings: Russia
## 74                                                              R: Earnings: Sweden
## 75                                                            R: Earnings: Slovenia
## 76                                                            R: Earnings: Slovakia
## 77                                                              R: Earnings: Turkey
## 78                                                              R: Earnings: Taiwan
## 79                                                             R: Earnings: Ukraine
## 80                                                       R: Earnings: United States
## 81                                                        R: Earnings: South Africa</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" title="1"><span class="kw">freq</span>(cl09<span class="op">$</span>v33)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<pre><code>## Q6b It is responsib of governm to reduce differences in income betwn people with 
##       Frequency  Percent
## 1           293  19.4684
## 2           794  52.7575
## 3           254  16.8771
## 4           115   7.6412
## 5            21   1.3953
## 8            23   1.5282
## 9             5   0.3322
## Total      1505 100.0000</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1"><span class="kw">get_labels</span>(cl09<span class="op">$</span>v33,<span class="dt">values =</span> <span class="st">&quot;as.name&quot;</span>)</a></code></pre></div>
<pre><code>##                            1                            2 
##             &quot;Strongly agree&quot;                      &quot;Agree&quot; 
##                            3                            4 
## &quot;Neither agree nor disagree&quot;                   &quot;Disagree&quot; 
##                            5                            8 
##          &quot;Strongly disagree&quot;                &quot;Cant choose&quot; 
##                            9 
##                         &quot;NA&quot;</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" title="1">dat09<span class="op">$</span>redis &lt;-<span class="kw">rec</span>(cl09<span class="op">$</span>v33, <span class="dt">rec=</span><span class="st">&quot;8:9=NA;else=copy&quot;</span>)</a>
<a class="sourceLine" id="cb109-2" title="2">dat09<span class="op">$</span>redis &lt;-<span class="kw">rec</span>(dat09<span class="op">$</span>redis, <span class="dt">rec=</span><span class="st">&quot;rev&quot;</span>)</a>
<a class="sourceLine" id="cb109-3" title="3"><span class="kw">freq</span>(dat09<span class="op">$</span>redis)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-13-2.png" width="672" /></p>
<pre><code>## Q6b It is responsib of governm to reduce differences in income betwn people with 
##       Frequency Percent Valid Percent
## 1            21   1.395         1.422
## 2           115   7.641         7.786
## 3           254  16.877        17.197
## 4           794  52.757        53.758
## 5           293  19.468        19.838
## NA&#39;s         28   1.860              
## Total      1505 100.000       100.000</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" title="1">dat09<span class="op">$</span>redis &lt;-<span class="kw">set_labels</span>(dat09<span class="op">$</span>redis,<span class="dt">labels=</span> <span class="kw">c</span>(<span class="st">&quot;Muy en desacuerdo&quot;</span>=<span class="dv">1</span>, <span class="st">&quot;En descacuerdo&quot;</span>=<span class="dv">2</span>,<span class="st">&quot;Ni acuerdo ni desacuerdo&quot;</span>=<span class="dv">3</span>, <span class="st">&quot;De acuerdo&quot;</span>=<span class="dv">4</span>, <span class="st">&quot;Muy de acuerdo&quot;</span>=<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb111-2" title="2"><span class="kw">get_labels</span>(dat09<span class="op">$</span>redis, <span class="dt">values=</span><span class="st">&quot;as.name&quot;</span>)</a></code></pre></div>
<pre><code>##                          1                          2 
##        &quot;Muy en desacuerdo&quot;           &quot;En descacuerdo&quot; 
##                          3                          4 
## &quot;Ni acuerdo ni desacuerdo&quot;               &quot;De acuerdo&quot; 
##                          5 
##           &quot;Muy de acuerdo&quot;</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" title="1"><span class="co">#dummy redis</span></a>
<a class="sourceLine" id="cb113-2" title="2">dat09<span class="op">$</span>redis_dummy&lt;-<span class="kw">ifelse</span>(dat09<span class="op">$</span>redis<span class="op">&gt;</span><span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb113-3" title="3">dat09<span class="op">$</span>redis_dummy &lt;-<span class="kw">set_labels</span>(dat09<span class="op">$</span>redis_dummy,<span class="dt">labels=</span> <span class="kw">c</span>(<span class="st">&quot;En desacuerdo&quot;</span>=<span class="dv">0</span>, <span class="st">&quot;De acuerdo&quot;</span>=<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb113-4" title="4"><span class="kw">freq</span>(dat09<span class="op">$</span>redis_dummy)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-13-3.png" width="672" /></p>
<pre><code>## dat09$redis_dummy 
##       Frequency Percent Valid Percent
## 0           390   25.91          26.4
## 1          1087   72.23          73.6
## NA&#39;s         28    1.86              
## Total      1505  100.00         100.0</code></pre>
</div>
<div id="e---estatus-subjetivo-1" class="section level3">
<h3><span class="header-section-number">1.4.6</span> e - estatus subjetivo</h3>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" title="1"><span class="kw">table</span>(cl09<span class="op">$</span>v44)</a></code></pre></div>
<pre><code>## 
##   1   2   3   4   5   6   7   8   9  10  98  99 
## 138 132 251 353 404 123  54  23   9   3  12   3</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" title="1">cl09<span class="op">$</span>v44 &lt;-<span class="st"> </span>car<span class="op">::</span><span class="kw">recode</span>(cl09<span class="op">$</span>v44,<span class="st">&quot;c(98,99)=NA&quot;</span>,<span class="dt">as.numeric =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb117-2" title="2"><span class="kw">freq</span>(cl09<span class="op">$</span>v44) <span class="co"># OK esatus subjetivo 2009</span></a></code></pre></div>
<pre><code>## Q10a [TOPBOT] Groups tending towards top+bottom. Where would you put yourself on 
##       Frequency  Percent Valid Percent
## 1           138   9.1694        9.2617
## 2           132   8.7708        8.8591
## 3           251  16.6777       16.8456
## 4           353  23.4551       23.6913
## 5           404  26.8439       27.1141
## 6           123   8.1728        8.2550
## 7            54   3.5880        3.6242
## 8            23   1.5282        1.5436
## 9             9   0.5980        0.6040
## 10            3   0.1993        0.2013
## NA&#39;s         15   0.9967              
## Total      1505 100.0000      100.0000</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" title="1">dat09<span class="op">$</span>ess &lt;-<span class="st"> </span>cl09<span class="op">$</span>v44 <span class="co"># save estatus subjetivo en dat09</span></a>
<a class="sourceLine" id="cb119-2" title="2"><span class="kw">freq</span>(dat09<span class="op">$</span>ess)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<pre><code>## Q10a [TOPBOT] Groups tending towards top+bottom. Where would you put yourself on 
##       Frequency  Percent Valid Percent
## 1           138   9.1694        9.2617
## 2           132   8.7708        8.8591
## 3           251  16.6777       16.8456
## 4           353  23.4551       23.6913
## 5           404  26.8439       27.1141
## 6           123   8.1728        8.2550
## 7            54   3.5880        3.6242
## 8            23   1.5282        1.5436
## 9             9   0.5980        0.6040
## 10            3   0.1993        0.2013
## NA&#39;s         15   0.9967              
## Total      1505 100.0000      100.0000</code></pre>
</div>
<div id="save-09-data" class="section level3">
<h3><span class="header-section-number">1.4.7</span> Save 09 data</h3>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" title="1"><span class="kw">save</span>(dat09,<span class="dt">file =</span> <span class="st">&quot;input/data/processed/dat09.RData&quot;</span>)</a></code></pre></div>
</div>
</div>
<div id="year-2019" class="section level2">
<h2><span class="header-section-number">1.5</span> Year 2019</h2>
<div id="load-data-2019" class="section level3">
<h3><span class="header-section-number">1.5.1</span> Load data 2019</h3>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" title="1"><span class="kw">load</span>(<span class="st">&quot;input/data/intermediate/cl19.RData&quot;</span>) <span class="co"># cl19</span></a></code></pre></div>
</div>
<div id="a--salaries-perceived-just-worker-manager-2019" class="section level3">
<h3><span class="header-section-number">1.5.2</span> a- salaries perceived &amp; just worker &amp; manager 2019</h3>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" title="1"><span class="co"># Find vars</span></a>
<a class="sourceLine" id="cb123-2" title="2"></a>
<a class="sourceLine" id="cb123-3" title="3"><span class="kw">find_var</span>(cl19,<span class="st">&quot;obrero&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># m2_p2_obrero: perceived worker, m2_p3_obrero: just worker</span></a></code></pre></div>
<pre><code>##   col.nr     var.name
## 1    101 m2_p2_obrero
## 2    111 m2_p3_obrero
## 3    102     m2_p2a_4
## 4    189     ds_p16_1
## 5    192      ds_p19a
## 6    198    ds_p25a_1
## 7    199    ds_p25b_1
## 8    200    ds_p25c_1
##                                                                          var.label
## 1 ¿Cuánto cree Ud. que gana al mes &quot;Un obrero no calificado de una fábrica&quot;? Monto
## 2 ¿Cuánto cree Ud. que las personas en estos trabajos deberían ganar al mes, despu
## 3 ¿Cuánto cree Ud. que gana al mes &quot;Un obrero no calificado de una fábrica&quot;? Rango
## 4 Y cuando Ud. tenía 15 años, ¿qué tipo de trabajo tenía su padre? ¿cuál era la oc
## 5 Y cuando Ud. tenía 15 años, ¿qué tipo de trabajo tenía su madre? ¿cuál era la oc
## 6 ¿Cuál es o era la actividad principal de su esposo/a o pareja? Si no está trabaj
## 7 ¿Cuáles son o eran algunas de sus principales funciones? Se ruega escribir una d
## 8 ¿Qué es lo que principalmente hace la empresa u organización en la que ella o él</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" title="1"><span class="kw">find_var</span>(cl19,<span class="st">&quot;presidente&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># m2_p2_presidente: perceived chairman, m2_p3_presidente: just chairman</span></a></code></pre></div>
<pre><code>##   col.nr         var.name
## 1     97 m2_p2_presidente
## 2    107 m2_p3_presidente
## 3     98         m2_p2a_2
##                                                                          var.label
## 1 ¿Cuánto cree Ud. que gana al mes &quot;El presidente de una gran empresa nacional&quot;? M
## 2 ¿Cuánto cree Ud. que las personas en estos trabajos deberían ganar al mes, despu
## 3 ¿Cuánto cree Ud. que gana al mes &quot;El presidente de una gran empresa nacional&quot;?:</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" title="1"><span class="co"># Create object with vars &amp; rename</span></a>
<a class="sourceLine" id="cb127-2" title="2"></a>
<a class="sourceLine" id="cb127-3" title="3">dat19 &lt;-<span class="st"> </span>cl19 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(m2_p2_presidente,m2_p2_obrero,m2_p3_obrero,m2_p3_presidente) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename</span>(<span class="dt">salperger=</span>m2_p2_presidente,</a>
<a class="sourceLine" id="cb127-4" title="4">               <span class="dt">salperobr=</span>m2_p2_obrero,</a>
<a class="sourceLine" id="cb127-5" title="5">               <span class="dt">saljusger=</span>m2_p3_presidente,</a>
<a class="sourceLine" id="cb127-6" title="6">               <span class="dt">saljusobr=</span>m2_p3_obrero)</a>
<a class="sourceLine" id="cb127-7" title="7"></a>
<a class="sourceLine" id="cb127-8" title="8"><span class="co"># Recodes</span></a>
<a class="sourceLine" id="cb127-9" title="9"></a>
<a class="sourceLine" id="cb127-10" title="10"><span class="kw">stargazer</span>(dat19, <span class="dt">type=</span><span class="st">&quot;text&quot;</span>)</a></code></pre></div>
<pre><code>## 
## =====================================================================================================
## Statistic   N        Mean         St. Dev.        Min       Pctl(25)       Pctl(75)         Max      
## -----------------------------------------------------------------------------------------------------
## salperger 1,041 11,866,859.000 13,282,919.000 300,000.000 4,000,000.000 15,000,000.000 90,000,000.000
## salperobr 1,272  364,542.300    270,663.800     100.000    300,000.000   400,000.000   8,000,000.000 
## saljusobr 1,255  554,184.600    271,174.400     300.000    400,000.000   600,000.000   4,000,000.000 
## saljusger  985  6,366,528.000  9,299,138.000  50,000.000  2,000,000.000 7,000,000.000  90,000,000.000
## -----------------------------------------------------------------------------------------------------</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" title="1">dat19[][dat19  <span class="op">&gt;=</span><span class="st"> </span><span class="dv">99999999998</span>] &lt;-<span class="st"> </span><span class="ot">NA</span> <span class="co"># missings</span></a>
<a class="sourceLine" id="cb129-2" title="2"></a>
<a class="sourceLine" id="cb129-3" title="3">dat19 &lt;-<span class="st"> </span>dat19 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb129-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">salperobr=</span><span class="kw">replace</span>(salperobr, salperobr <span class="op">&lt;=</span><span class="st"> </span><span class="dv">40000</span> <span class="op">|</span><span class="st"> </span>salperobr<span class="op">&gt;=</span><span class="st"> </span><span class="dv">1000000</span>, <span class="ot">NA</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb129-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">salperger=</span><span class="kw">replace</span>(salperger, salperger <span class="op">&lt;=</span><span class="st"> </span><span class="dv">250000</span> <span class="op">|</span><span class="st"> </span>salperger<span class="op">&gt;=</span><span class="st"> </span><span class="dv">100000001</span>, <span class="ot">NA</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb129-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">saljusobr=</span><span class="kw">replace</span>(saljusobr, saljusobr <span class="op">&lt;=</span><span class="st"> </span><span class="dv">40000</span>, <span class="ot">NA</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb129-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">saljusger=</span><span class="kw">replace</span>(saljusger, saljusger <span class="op">&lt;=</span><span class="st"> </span><span class="dv">100000</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb129-8" title="8"></a>
<a class="sourceLine" id="cb129-9" title="9"><span class="co">#---Brecha salarial percibida</span></a>
<a class="sourceLine" id="cb129-10" title="10">dat19<span class="op">$</span>gap_perc   &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(dat19<span class="op">$</span>salperger<span class="op">/</span>dat19<span class="op">$</span>salperobr) <span class="co"># diferencia total</span></a>
<a class="sourceLine" id="cb129-11" title="11">dat19<span class="op">$</span>lngap_perc &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(<span class="kw">log</span>(dat19<span class="op">$</span>gap_perc))                 <span class="co"># diferencia log</span></a>
<a class="sourceLine" id="cb129-12" title="12"></a>
<a class="sourceLine" id="cb129-13" title="13"><span class="co">#---Brecha salarial justa</span></a>
<a class="sourceLine" id="cb129-14" title="14">dat19<span class="op">$</span>gap_just   &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(dat19<span class="op">$</span>saljusger<span class="op">/</span>dat19<span class="op">$</span>saljusobr) <span class="co"># diferencia total</span></a>
<a class="sourceLine" id="cb129-15" title="15">dat19<span class="op">$</span>lngap_just &lt;-<span class="st">  </span><span class="kw">as.numeric</span>(<span class="kw">log</span>(dat19<span class="op">$</span>gap_just))                <span class="co"># diferencia log</span></a>
<a class="sourceLine" id="cb129-16" title="16"><span class="kw">dim</span>(<span class="kw">na.omit</span>(dat19))</a></code></pre></div>
<pre><code>## [1] 890   8</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" title="1"><span class="kw">hist</span>(dat19<span class="op">$</span>saljusger)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" title="1"><span class="kw">hist</span>(dat19<span class="op">$</span>saljusobr)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-17-2.png" width="672" /></p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" title="1"><span class="kw">hist</span>(dat19<span class="op">$</span>gap_just)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-17-3.png" width="672" /></p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" title="1"><span class="kw">hist</span>(dat19<span class="op">$</span>gap_perc)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-17-4.png" width="672" /></p>
</div>
<div id="b---education-2019" class="section level3">
<h3><span class="header-section-number">1.5.3</span> b - education 2019</h3>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" title="1"><span class="co"># Find vars</span></a>
<a class="sourceLine" id="cb135-2" title="2"></a>
<a class="sourceLine" id="cb135-3" title="3"><span class="kw">find_var</span>(cl19,<span class="st">&quot;Educ&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># ds_p4:</span></a></code></pre></div>
<pre><code>##    col.nr  var.name
## 1      27   mb_12_4
## 2      11   mb_p1_1
## 3      12   mb_p1_2
## 4      13   mb_p1_3
## 5     175     ds_p4
## 6     187    ds_p14
## 7     190    ds_p17
## 8     192   ds_p19a
## 9     199 ds_p25b_1
## 10    200 ds_p25c_1
##                                                                           var.label
## 1               ¿Qué nota le pondría usted al Gobierno por su gestión en Educación?
## 2  Hay una serie de problemas que tiene nuestro país. ¿Cuáles son los tres problema
## 3  ¿Cuáles son los tres problemas a los que debería dedicar el mayor esfuerzo en so
## 4  ¿Cuáles son los tres problemas a los que debería dedicar el mayor esfuerzo en so
## 5      Sin tomar en cuenta las repeticiones de curso ¿cuál es su nivel educacional?
## 6              ¿Podría decirme cuál es el nivel educacional alcanzado por su padre?
## 7              ¿Podría decirme cuál es el nivel educacional alcanzado por su madre?
## 8  Y cuando Ud. tenía 15 años, ¿qué tipo de trabajo tenía su madre? ¿cuál era la oc
## 9  ¿Cuáles son o eran algunas de sus principales funciones? Se ruega escribir una d
## 10 ¿Qué es lo que principalmente hace la empresa u organización en la que ella o él</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" title="1"><span class="kw">frq</span>(<span class="kw">as.factor</span>(cl19<span class="op">$</span>ds_p4))</a></code></pre></div>
<pre><code>## 
## x &lt;categorical&gt;
## # total N=1380  valid N=1380  mean=4.64  sd=8.75
## 
##  val frq raw.prc valid.prc cum.prc
##    0  21    1.52      1.52    1.52
##    1 253   18.33     18.33   19.86
##    2 135    9.78      9.78   29.64
##    3 148   10.72     10.72   40.36
##    4 410   29.71     29.71   70.07
##    5  77    5.58      5.58   75.65
##    6 118    8.55      8.55   84.20
##    7  65    4.71      4.71   88.91
##    8 116    8.41      8.41   97.32
##    9  26    1.88      1.88   99.20
##   99  11    0.80      0.80  100.00
##   NA   0    0.00        NA      NA</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" title="1"><span class="co"># Problema: no se encuentran los codigos originales en codebook, se derivan de la pregunta father education v317, que tiene las 7 categorías unesco asumiendo que las 7 de degree son las mismas:</span></a>
<a class="sourceLine" id="cb139-2" title="2"></a>
<a class="sourceLine" id="cb139-3" title="3"><span class="co"># 1. None</span></a>
<a class="sourceLine" id="cb139-4" title="4"><span class="co"># 2. Incomplete primary</span></a>
<a class="sourceLine" id="cb139-5" title="5"><span class="co"># 3. Primary completed</span></a>
<a class="sourceLine" id="cb139-6" title="6"><span class="co"># 4. Incomplete secondary (also includes completed qualifications at a level below academic secondary school</span></a>
<a class="sourceLine" id="cb139-7" title="7"><span class="co"># completion – for example skilled manual qualifications given by trade schools.)</span></a>
<a class="sourceLine" id="cb139-8" title="8"><span class="co"># 5. Secondary completed</span></a>
<a class="sourceLine" id="cb139-9" title="9"><span class="co"># 6. Some tertiary education but less than a university Bachelor’s degree (Includes incomplete university. Also</span></a>
<a class="sourceLine" id="cb139-10" title="10"><span class="co"># includes completed post-secondary courses below university Bachelor’s degree level. Examples are qualifications</span></a>
<a class="sourceLine" id="cb139-11" title="11"><span class="co"># from US junior college, polytechnical institutes in many countries, and other similar post-secondary education.)</span></a>
<a class="sourceLine" id="cb139-12" title="12"><span class="co"># 7. University completed (Bachelor’s degree or higher)</span></a>
<a class="sourceLine" id="cb139-13" title="13"></a>
<a class="sourceLine" id="cb139-14" title="14"><span class="co"># Codificación original Francisco queda stand-by:</span></a>
<a class="sourceLine" id="cb139-15" title="15"></a>
<a class="sourceLine" id="cb139-16" title="16"><span class="co"># #dat99 &lt;- mutate(dat99, educ_rec = car::recode(dat99$educ, &quot;3001:3004 = 1;  = 2;3008=2; 3010 = 3;3007 = 4&quot;))</span></a>
<a class="sourceLine" id="cb139-17" title="17"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3001:3004 ] &lt;- 1</span></a>
<a class="sourceLine" id="cb139-18" title="18"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3005:3006 ] &lt;- 2</span></a>
<a class="sourceLine" id="cb139-19" title="19"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3008] &lt;- 2</span></a>
<a class="sourceLine" id="cb139-20" title="20"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3010] &lt;- 3</span></a>
<a class="sourceLine" id="cb139-21" title="21"><span class="co"># dat99$educ_rec[dat99$educ_rec== 3007] &lt;- 4</span></a>
<a class="sourceLine" id="cb139-22" title="22"></a>
<a class="sourceLine" id="cb139-23" title="23">edcl19 &lt;-<span class="st"> </span>cl19 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(ds_p4) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">educ_rec=</span><span class="kw">rec</span>(ds_p4,<span class="dt">rec =</span> <span class="st">&quot;0:3=1; 4:5=2 ;7=2 ; 6=3 ; 8:9=4&quot;</span>))</a></code></pre></div>
<pre><code>## One or more of the old values are recoded into identical new values.
## Please check if you correctly specified the recode-pattern,
## else separate multiple values with comma, e.g. rec=&quot;a,b,c=1; d,e,f=2&quot;.</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" title="1">dat19&lt;-<span class="kw">cbind</span>(dat19,edcl19 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(educ_rec)) <span class="co"># add educ to table</span></a>
<a class="sourceLine" id="cb141-2" title="2"></a>
<a class="sourceLine" id="cb141-3" title="3"><span class="kw">summary</span>(dat19)</a></code></pre></div>
<pre><code>##    salperger          salperobr        saljusobr         saljusger       
##  Min.   :  300000   Min.   : 42000   Min.   :  50000   Min.   :  200000  
##  1st Qu.: 4000000   1st Qu.:300000   1st Qu.: 400000   1st Qu.: 2000000  
##  Median : 8000000   Median :300000   Median : 500000   Median : 4000000  
##  Mean   :11866859   Mean   :355602   Mean   : 558919   Mean   : 6405056  
##  3rd Qu.:15000000   3rd Qu.:400000   3rd Qu.: 600000   3rd Qu.: 7000000  
##  Max.   :90000000   Max.   :800000   Max.   :4000000   Max.   :90000000  
##  NA&#39;s   :339        NA&#39;s   :133      NA&#39;s   :136       NA&#39;s   :401       
##     gap_perc        lngap_perc         gap_just         lngap_just     
##  Min.   :  0.75   Min.   :-0.2877   Min.   :  0.375   Min.   :-0.9808  
##  1st Qu.: 11.67   1st Qu.: 2.4567   1st Qu.:  3.723   1st Qu.: 1.3146  
##  Median : 22.50   Median : 3.1135   Median :  7.500   Median : 2.0149  
##  Mean   : 36.76   Mean   : 3.1143   Mean   : 13.508   Mean   : 2.0172  
##  3rd Qu.: 42.86   3rd Qu.: 3.7579   3rd Qu.: 15.000   3rd Qu.: 2.7081  
##  Max.   :353.33   Max.   : 5.8674   Max.   :200.000   Max.   : 5.2983  
##  NA&#39;s   :363      NA&#39;s   :363       NA&#39;s   :418       NA&#39;s   :418      
##     educ_rec    
##  Min.   :1.000  
##  1st Qu.:1.000  
##  Median :2.000  
##  Mean   :1.887  
##  3rd Qu.:2.000  
##  Max.   :4.000  
##  NA&#39;s   :11</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" title="1"><span class="kw">table</span>(dat19<span class="op">$</span>educ_rec)</a></code></pre></div>
<pre><code>## 
##   1   2   3   4 
## 557 552 118 142</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" title="1">dat19 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(educ_rec) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">m=</span><span class="kw">median</span>(gap_perc, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   educ_rec     m
##      &lt;dbl&gt; &lt;dbl&gt;
## 1        1  20  
## 2        2  21.6
## 3        3  29.3
## 4        4  28.6
## 5       NA  41.7</code></pre>
</div>
<div id="c-income-2019" class="section level3">
<h3><span class="header-section-number">1.5.4</span> c-income 2019</h3>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" title="1"><span class="kw">find_var</span>(cl19,<span class="st">&quot;este hogar&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># ds_p39: perceived worker, v31 just worker</span></a></code></pre></div>
<pre><code>##    col.nr  var.name
## 1     212    ds_p34
## 2     220    ds_p39
## 3     226  ds_p45_1
## 4     227  ds_p45_2
## 5     228  ds_p45_3
## 6     229  ds_p45_4
## 7     230  ds_p45_5
## 8     231  ds_p45_6
## 9     232  ds_p45_7
## 10    233  ds_p45_8
## 11    234  ds_p45_9
## 12    235 ds_p45_10
## 13    236 ds_p45_11
## 14    237 ds_p45_12
## 15    238 ds_p45_13
## 16    239 ds_p45_14
## 17    240 ds_p45_15
## 18    241 ds_p45_16
## 19    242 ds_p45_17
## 20    243  ds_p46_1
## 21    244  ds_p46_2
##                                                                           var.label
## 1                            ¿Cuántas personas viven permanentemente en este hogar?
## 2  ¿Podría Ud. indicarme en cuál de ellos se encuentra este hogar, considerando tod
## 3   ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? TV a color
## 4  ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Videograbad
## 5  ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Conexión a 
## 6  ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Minicompone
## 7  ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Lavadora au
## 8  ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Secadora o 
## 9  ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Refrigerado
## 10  ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Congelador
## 11 ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Horno micro
## 12 ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Lava-vajill
## 13    ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Calefont
## 14 ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Teléfono ce
## 15 ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Teléfono re
## 16 ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Computadora
## 17 ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Conexión a 
## 18 ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Cámara de v
## 19 ¿Tiene este hogar alguno de los siguientes artefactos y/o servicios? Servicio do
## 20 ¿Tiene este hogar alguno de los siguientes vehículos destinados sólo para uso pa
## 21 ¿Tiene este hogar alguno de los siguientes vehículos destinados sólo para uso pa</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" title="1"><span class="kw">freq</span>(cl19<span class="op">$</span>ds_p39) <span class="co"># deciles family</span></a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<pre><code>## ¿Podría Ud. indicarme en cuál de ellos se encuentra este hogar, considerando tod 
##       Frequency  Percent
## 1             3   0.2174
## 2             4   0.2899
## 3             5   0.3623
## 4            22   1.5942
## 5            40   2.8986
## 6            40   2.8986
## 7            65   4.7101
## 8            72   5.2174
## 9            98   7.1014
## 10          124   8.9855
## 11          260  18.8406
## 12           85   6.1594
## 13           17   1.2319
## 14           15   1.0870
## 88          130   9.4203
## 99          400  28.9855
## Total      1380 100.0000</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" title="1"><span class="co"># take income, impute middle range, then divide by persons in household, then deciles</span></a>
<a class="sourceLine" id="cb151-2" title="2"></a>
<a class="sourceLine" id="cb151-3" title="3">cl19<span class="op">$</span>income_c=<span class="st"> </span><span class="kw">rec</span>(cl19<span class="op">$</span>ds_p39,<span class="dt">rec =</span></a>
<a class="sourceLine" id="cb151-4" title="4">      <span class="st">&quot;1=45000;</span></a>
<a class="sourceLine" id="cb151-5" title="5"><span class="st">      2=105500;</span></a>
<a class="sourceLine" id="cb151-6" title="6"><span class="st">      3=135500;</span></a>
<a class="sourceLine" id="cb151-7" title="7"><span class="st">      4=165500;</span></a>
<a class="sourceLine" id="cb151-8" title="8"><span class="st">      5=195500;</span></a>
<a class="sourceLine" id="cb151-9" title="9"><span class="st">      6=225500;</span></a>
<a class="sourceLine" id="cb151-10" title="10"><span class="st">      7=265500;</span></a>
<a class="sourceLine" id="cb151-11" title="11"><span class="st">      8=240500;</span></a>
<a class="sourceLine" id="cb151-12" title="12"><span class="st">      9=495500;</span></a>
<a class="sourceLine" id="cb151-13" title="13"><span class="st">      10=800500;</span></a>
<a class="sourceLine" id="cb151-14" title="14"><span class="st">      11=1250000;</span></a>
<a class="sourceLine" id="cb151-15" title="15"><span class="st">      12=1750000;</span></a>
<a class="sourceLine" id="cb151-16" title="16"><span class="st">      13=2500000;</span></a>
<a class="sourceLine" id="cb151-17" title="17"><span class="st">      14=4000000;</span></a>
<a class="sourceLine" id="cb151-18" title="18"><span class="st">      88=NA;</span></a>
<a class="sourceLine" id="cb151-19" title="19"><span class="st">      99=NA&quot;</span>)</a></code></pre></div>
<pre><code>## One or more of the old values are recoded into identical new values.
## Please check if you correctly specified the recode-pattern,
## else separate multiple values with comma, e.g. rec=&quot;a,b,c=1; d,e,f=2&quot;.</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" title="1"><span class="kw">freq</span>(cl19<span class="op">$</span>income_c) <span class="co"># ok</span></a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-19-2.png" width="672" /></p>
<pre><code>## ¿Podría Ud. indicarme en cuál de ellos se encuentra este hogar, considerando tod 
##         Frequency  Percent Valid Percent
## 45000           3   0.2174        0.3529
## 105500          4   0.2899        0.4706
## 135500          5   0.3623        0.5882
## 165500         22   1.5942        2.5882
## 195500         40   2.8986        4.7059
## 225500         40   2.8986        4.7059
## 240500         72   5.2174        8.4706
## 265500         65   4.7101        7.6471
## 495500         98   7.1014       11.5294
## 800500        124   8.9855       14.5882
## 1250000       260  18.8406       30.5882
## 1750000        85   6.1594       10.0000
## 2500000        17   1.2319        2.0000
## 4000000        15   1.0870        1.7647
## NA&#39;s          530  38.4058              
## Total        1380 100.0000      100.0000</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" title="1"><span class="kw">find_var</span>(cl19,<span class="st">&quot;viven&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># ds_p34</span></a></code></pre></div>
<pre><code>##   col.nr     var.name
## 1      4  total_hogar
## 2    212       ds_p34
## 3    213       ds_p35
## 4    214 ds_p35a_otro
## 5    215       ds_p36
## 6    216 ds_p36a_otro
## 7    217       ds_p37
## 8    218 ds_p37a_otro
##                                                                          var.label
## 1 ¿Cuántas personas de 18 años o más, excluyendo al servicio doméstico, viven perm
## 2                           ¿Cuántas personas viven permanentemente en este hogar?
## 3 ¿Cuántos adultos viven permanentemente, esto es, 4 o más días a la semana, en es
## 4 ¿Cuántos adultos viven permanentemente, esto es, 4 o más días a la semana, en es
## 5 ¿Cuántos niños viven permanentemente, esto es, 4 o más días a la semana, en este
## 6 ¿Cuántos niños viven permanentemente, esto es, 4 o más días a la semana, en este
## 7 ¿Cuántas guaguas viven permanentemente, esto es, 4 o más días a la semana, en es
## 8 ¿Cuántas guaguas viven permanentemente, esto es, 4 o más días a la semana, en es</code></pre>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" title="1"><span class="kw">freq</span>(cl19<span class="op">$</span>ds_p34)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-19-3.png" width="672" /></p>
<pre><code>## ¿Cuántas personas viven permanentemente en este hogar? 
##       Frequency   Percent
## 1           191  13.84058
## 2           302  21.88406
## 3           328  23.76812
## 4           270  19.56522
## 5           155  11.23188
## 6            71   5.14493
## 7            23   1.66667
## 8            22   1.59420
## 9             7   0.50725
## 10            2   0.14493
## 11            5   0.36232
## 12            3   0.21739
## 13            1   0.07246
## Total      1380 100.00000</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" title="1">dat19<span class="op">$</span>ingreso_pc=<span class="st"> </span>cl19<span class="op">$</span>income_c<span class="op">/</span>cl19<span class="op">$</span>ds_p34</a>
<a class="sourceLine" id="cb159-2" title="2"></a>
<a class="sourceLine" id="cb159-3" title="3"><span class="co"># Generar quintiles de ingreso</span></a>
<a class="sourceLine" id="cb159-4" title="4"></a>
<a class="sourceLine" id="cb159-5" title="5">dat19 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Quint =</span> <span class="kw">ntile</span>(ingreso_pc,<span class="dv">5</span>)) -&gt;<span class="st"> </span>dat19</a>
<a class="sourceLine" id="cb159-6" title="6"></a>
<a class="sourceLine" id="cb159-7" title="7"><span class="co"># Check</span></a>
<a class="sourceLine" id="cb159-8" title="8"><span class="kw">freq</span>( dat19<span class="op">$</span>Quint)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-19-4.png" width="672" /></p>
<pre><code>## dat19$Quint 
##       Frequency Percent Valid Percent
## 1           170   12.32            20
## 2           170   12.32            20
## 3           170   12.32            20
## 4           170   12.32            20
## 5           170   12.32            20
## NA&#39;s        530   38.41              
## Total      1380  100.00           100</code></pre>
</div>
<div id="d---redistribution-2019" class="section level3">
<h3><span class="header-section-number">1.5.5</span> d - redistribution 2019</h3>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" title="1"><span class="kw">find_var</span>(cl19,<span class="st">&quot;responsabilidad&quot;</span>,<span class="dt">search =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># m2_p4_2</span></a></code></pre></div>
<pre><code>##   col.nr var.name
## 1     79   mb_p21
## 2    116  m2_p4_2
## 3    118  m2_p4_4
## 4    119    m2_p5
##                                                                          var.label
## 1 Ahora, respecto de quién debería tener la principal responsabilidad por el suste
## 2 ¿Qué tan de acuerdo o en desacuerdo está Ud. con &quot;Es responsabilidad del gobiern
## 3 ¿Qué tan de acuerdo o en desacuerdo está Ud. con &quot;Es responsabilidad de las empr
## 4 ¿Quién cree Ud. que debería tener la mayor responsabilidad en reducir las difere</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" title="1"><span class="kw">freq</span>(cl19<span class="op">$</span>m2_p4_<span class="dv">2</span> )</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<pre><code>## ¿Qué tan de acuerdo o en desacuerdo está Ud. con &quot;Es responsabilidad del gobiern 
##       Frequency  Percent
## 1           370  26.8116
## 2           651  47.1739
## 3           212  15.3623
## 4            84   6.0870
## 5            26   1.8841
## 8            26   1.8841
## 9            11   0.7971
## Total      1380 100.0000</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" title="1"><span class="kw">get_labels</span>(cl19<span class="op">$</span>m2_p4_<span class="dv">2</span> ,<span class="dt">values =</span> <span class="st">&quot;as.name&quot;</span>)</a></code></pre></div>
<pre><code>##                                1                                2 
##                 &quot;Muy de acuerdo&quot;                     &quot;De acuerdo&quot; 
##                                3                                4 
## &quot;Ni de acuerdo ni en desacuerdo&quot;                  &quot;En desacuerdo&quot; 
##                                5                                8 
##              &quot;Muy en desacuerdo&quot;                        &quot;No sabe&quot; 
##                                9 
##                    &quot;No contesta&quot;</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" title="1">dat19<span class="op">$</span>redis &lt;-<span class="kw">rec</span>(cl19<span class="op">$</span>m2_p4_<span class="dv">2</span>, <span class="dt">rec=</span><span class="st">&quot;8:9=NA;else=copy&quot;</span>)</a>
<a class="sourceLine" id="cb167-2" title="2">dat19<span class="op">$</span>redis &lt;-<span class="kw">rec</span>(dat19<span class="op">$</span>redis, <span class="dt">rec=</span><span class="st">&quot;rev&quot;</span>)</a>
<a class="sourceLine" id="cb167-3" title="3"><span class="kw">freq</span>(dat99<span class="op">$</span>redis)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-20-2.png" width="672" /></p>
<pre><code>## Gov. must reduce differences in income  
##       Frequency  Percent Valid Percent
## 1            13   0.8649        0.9078
## 2           121   8.0506        8.4497
## 3           182  12.1091       12.7095
## 4           736  48.9687       51.3966
## 5           380  25.2828       26.5363
## NA&#39;s         71   4.7239              
## Total      1503 100.0000      100.0000</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" title="1">dat19<span class="op">$</span>redis &lt;-<span class="kw">set_labels</span>(dat19<span class="op">$</span>redis,<span class="dt">labels=</span> <span class="kw">c</span>(<span class="st">&quot;Muy en desacuerdo&quot;</span>=<span class="dv">1</span>, <span class="st">&quot;En descacuerdo&quot;</span>=<span class="dv">2</span>,<span class="st">&quot;Ni acuerdo ni desacuerdo&quot;</span>=<span class="dv">3</span>, <span class="st">&quot;De acuerdo&quot;</span>=<span class="dv">4</span>, <span class="st">&quot;Muy de acuerdo&quot;</span>=<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb169-2" title="2"><span class="kw">get_labels</span>(dat19<span class="op">$</span>redis, <span class="dt">values=</span><span class="st">&quot;as.name&quot;</span>)</a></code></pre></div>
<pre><code>##                          1                          2 
##        &quot;Muy en desacuerdo&quot;           &quot;En descacuerdo&quot; 
##                          3                          4 
## &quot;Ni acuerdo ni desacuerdo&quot;               &quot;De acuerdo&quot; 
##                          5 
##           &quot;Muy de acuerdo&quot;</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" title="1"><span class="co">#dummy redis</span></a>
<a class="sourceLine" id="cb171-2" title="2">dat19<span class="op">$</span>redis_dummy&lt;-<span class="kw">ifelse</span>(dat19<span class="op">$</span>redis<span class="op">&gt;</span><span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb171-3" title="3">dat19<span class="op">$</span>redis_dummy &lt;-<span class="kw">set_labels</span>(dat19<span class="op">$</span>redis_dummy,<span class="dt">labels=</span> <span class="kw">c</span>(<span class="st">&quot;En desacuerdo&quot;</span>=<span class="dv">0</span>, <span class="st">&quot;De acuerdo&quot;</span>=<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb171-4" title="4"><span class="kw">freq</span>(dat99<span class="op">$</span>redis_dummy)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-20-3.png" width="672" /></p>
<pre><code>## dat99$redis_dummy 
##       Frequency Percent Valid Percent
## 0           316  21.025         22.07
## 1          1116  74.251         77.93
## NA&#39;s         71   4.724              
## Total      1503 100.000        100.00</code></pre>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" title="1"><span class="kw">freq</span>(<span class="kw">to_label</span>(dat99<span class="op">$</span>redis))</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-20-4.png" width="672" /></p>
<pre><code>## Gov. must reduce differences in income  
##                          Frequency  Percent Valid Percent
## Muy en desacuerdo               13   0.8649        0.9078
## En descacuerdo                 121   8.0506        8.4497
## Ni acuerdo ni desacuerdo       182  12.1091       12.7095
## De acuerdo                     736  48.9687       51.3966
## Muy de acuerdo                 380  25.2828       26.5363
## NA&#39;s                            71   4.7239              
## Total                         1503 100.0000      100.0000</code></pre>
</div>
<div id="e---estatus-subjetivo-2" class="section level3">
<h3><span class="header-section-number">1.5.6</span> e - estatus subjetivo</h3>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" title="1"><span class="kw">table</span>(cl19<span class="op">$</span>m2_p13a)</a></code></pre></div>
<pre><code>## 
##   1   2   3   4   5   6   7   8   9  10  88  99 
##  44  66 217 307 460 155  76  28   6   8   6   7</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" title="1">cl19<span class="op">$</span>m2_p13a &lt;-<span class="st"> </span>car<span class="op">::</span><span class="kw">recode</span>(cl19<span class="op">$</span>m2_p13a,<span class="st">&quot;c(88,99)=NA&quot;</span>,<span class="dt">as.numeric =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb177-2" title="2"><span class="kw">freq</span>(cl19<span class="op">$</span>m2_p13a) <span class="co"># OK esatus subjetivo 2019</span></a></code></pre></div>
<pre><code>## En nuestra sociedad, hay grupos que tienden a ubicarse en los niveles más altos  
##       Frequency  Percent Valid Percent
## 1            44   3.1884        3.2187
## 2            66   4.7826        4.8281
## 3           217  15.7246       15.8742
## 4           307  22.2464       22.4579
## 5           460  33.3333       33.6503
## 6           155  11.2319       11.3387
## 7            76   5.5072        5.5596
## 8            28   2.0290        2.0483
## 9             6   0.4348        0.4389
## 10            8   0.5797        0.5852
## NA&#39;s         13   0.9420              
## Total      1380 100.0000      100.0000</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" title="1">dat19<span class="op">$</span>ess &lt;-<span class="st"> </span>cl19<span class="op">$</span>m2_p13a <span class="co"># save estatus subjetivo en dat19</span></a>
<a class="sourceLine" id="cb179-2" title="2"><span class="kw">freq</span>(dat19<span class="op">$</span>ess)</a></code></pre></div>
<p><img src="data-prep-B_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<pre><code>## En nuestra sociedad, hay grupos que tienden a ubicarse en los niveles más altos  
##       Frequency  Percent Valid Percent
## 1            44   3.1884        3.2187
## 2            66   4.7826        4.8281
## 3           217  15.7246       15.8742
## 4           307  22.2464       22.4579
## 5           460  33.3333       33.6503
## 6           155  11.2319       11.3387
## 7            76   5.5072        5.5596
## 8            28   2.0290        2.0483
## 9             6   0.4348        0.4389
## 10            8   0.5797        0.5852
## NA&#39;s         13   0.9420              
## Total      1380 100.0000      100.0000</code></pre>
</div>
<div id="save-19-data" class="section level3">
<h3><span class="header-section-number">1.5.7</span> Save 19 data</h3>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" title="1"><span class="kw">save</span>(dat19,<span class="dt">file =</span> <span class="st">&quot;input/data/processed/dat19.RData&quot;</span>)</a></code></pre></div>
</div>
<div id="save-all-years-data" class="section level3">
<h3><span class="header-section-number">1.5.8</span> Save all years data</h3>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" title="1"><span class="kw">load</span>(<span class="st">&quot;input/data/processed/dat99.RData&quot;</span>)</a>
<a class="sourceLine" id="cb182-2" title="2"><span class="kw">load</span>(<span class="st">&quot;input/data/processed/dat09.RData&quot;</span>)</a>
<a class="sourceLine" id="cb182-3" title="3"><span class="kw">load</span>(<span class="st">&quot;input/data/processed/dat19.RData&quot;</span>)</a>
<a class="sourceLine" id="cb182-4" title="4"></a>
<a class="sourceLine" id="cb182-5" title="5">dat99<span class="op">$</span>year &lt;-<span class="st"> </span><span class="dv">1999</span></a>
<a class="sourceLine" id="cb182-6" title="6">dat09<span class="op">$</span>year &lt;-<span class="st"> </span><span class="dv">2009</span></a>
<a class="sourceLine" id="cb182-7" title="7">dat19<span class="op">$</span>year &lt;-<span class="st"> </span><span class="dv">2019</span></a>
<a class="sourceLine" id="cb182-8" title="8">clw3&lt;-<span class="st"> </span><span class="kw">bind_rows</span>(dat99,dat09)</a>
<a class="sourceLine" id="cb182-9" title="9">clw3&lt;-<span class="st"> </span><span class="kw">bind_rows</span>(clw3,dat19)</a>
<a class="sourceLine" id="cb182-10" title="10"><span class="kw">save</span>(clw3,<span class="dt">file =</span> <span class="st">&quot;input/data/processed/clw3.Rdata&quot;</span>)</a>
<a class="sourceLine" id="cb182-11" title="11"><span class="kw">names</span>(clw3)</a></code></pre></div>
<pre><code>##  [1] &quot;salperobr&quot;   &quot;saljusobr&quot;   &quot;salperger&quot;   &quot;saljusger&quot;   &quot;gap_perc&quot;   
##  [6] &quot;lngap_perc&quot;  &quot;gap_just&quot;    &quot;lngap_just&quot;  &quot;educ_rec&quot;    &quot;ingreso_pc&quot; 
## [11] &quot;Quint&quot;       &quot;redis&quot;       &quot;redis_dummy&quot; &quot;ess&quot;         &quot;year&quot;</code></pre>
<!-- # tratamiento CASEN 2000-2017 -->
<!-- ##Casen 2000 -->
<!-- ```{r} -->
<!-- load(file="input/data/original/datacasen/casen2000.RData") -->
<!-- ##sjPlot::view_df(select(cs2000, "o8"), show.values = T, show.labels = T, max.len = 1000) -->
<!--                 #hacer codebook para o8 -->
<!-- #peones de... -->
<!-- casen_obreros2000 = cs2000 %>% dplyr::filter(o8>=9210, o8<=9322) -->
<!-- casen_obreros2000 <- casen_obreros2000 %>% dplyr::select(yopraj) -->
<!-- casen_obreros2000<- na.omit(casen_obreros2000) -->
<!-- #gerentes de -->
<!-- casen_gerente2000 = cs2000 %>% dplyr::filter(o8==1210) #gerente empresa -->
<!-- #casen_gerente2000 <- casen_gerente2000 %>% dplyr::select(yopraj,o13,o10,o28, o11) -->
<!-- casen_gerente2000 = casen_gerente2000 %>% dplyr::filter(o10==1) -->
<!-- casen_gerente2000 = casen_gerente2000 %>% dplyr::filter(o13=="E" ) -->
<!-- brecha_real2000<-(median(casen_gerente2000$yopraj))/(median(casen_obreros2000$yopraj)) -->
<!-- summary(casen_obreros2000$yopraj) -->
<!-- summary(casen_gerente2000$yopraj) -->
<!-- summary(brecha_real2000) -->
<!-- table(casen_gerente2000$o13) -->
<!-- #sjPlot::view_df(casen_gerente2000, show.frq = T, max.len = 100000)#hacer codebook -->
<!-- ``` -->
<!-- ##Casen 2009 -->
<!-- ```{r} -->
<!-- load(file="input/data/original/datacasen/casen2009.RData") -->
<!-- ``` -->
<!-- ```{r} -->
<!-- ##sjPlot::view_df(select(cs2009, "c_o12"), show.values = T, show.labels = T, max.len = 1000) -->
<!-- #ocupacion:c_o12 -->
<!-- #ingreso: yopraj -->
<!-- #peones de... -->
<!-- casen_obreros2009 = cs2009 %>% dplyr::filter(c_o12>=9200, c_o12<=9322) -->
<!-- casen_obreros2009 <- casen_obreros2009 %>% dplyr::select(yopraj) -->
<!-- casen_obreros2009<- na.omit(casen_obreros2009) -->
<!-- #gerentes de -->
<!-- casen_gerente2009 = cs2009 %>% dplyr::filter(c_o12==1210) #gerente general empresa -->
<!-- casen_gerente2009 <- casen_gerente2009 %>% dplyr::select(yopraj,o14,o23) -->
<!-- casen_gerente2009 = casen_gerente2009 %>% dplyr::filter(o14=="F")    #gran empresa | cuando se utilizan los dos filtros se llega  a una brecha de 52 -->
<!-- casen_gerente2009 = casen_gerente2009 %>% dplyr::filter(o23==1)      # filtro por ser patron en la empresa. -->
<!-- casen_gerente2009<-na.omit(casen_gerente2009) -->
<!-- table(casen_gerente2009$o14) -->
<!-- #sjPlot::view_df(casen_gerente2009, show.frq = T, max.len = 1000) -->
<!-- brecha_real2009<-(median(casen_gerente2009$yopraj))/(median(casen_obreros2009$yopraj)) -->
<!-- summary(casen_obreros2009$yopraj) -->
<!-- summary(casen_gerente2009$yopraj) -->
<!-- brecha_real2009 -->
<!-- #sjPlot::view_df(casen_gerente2009, show.frq = T, max.len = 300) # hacer codebook -->
<!-- ``` -->
<!-- ```{r} -->
<!-- load(file="input/data/original/datacasen/casen2017.RData") -->
<!-- ``` -->
<!-- ## Casen 2017 -->
<!-- ```{r} -->
<!-- #codecasen17<-#sjPlot::view_df(cs2017)#hacer codebook -->
<!-- ##sjPlot::view_df(cs2017, show.values = T, show.labels = T, max.len = 1000) -->
<!--                 #hacer codebook para o8 -->
<!-- #peones de... -->
<!-- casen_obreros2017 = cs2017 %>% dplyr::filter(oficio4>=9211, oficio4<=9322) -->
<!-- casen_obreros2017 <- casen_obreros2017 %>% dplyr::select(y0101, o23) -->
<!-- casen_obreros2017<- na.omit(casen_obreros2017) -->
<!-- #gerentes de -->
<!-- #casen_gerente2017 = cs2017 %>% dplyr::filter(oficio4 %in% c(1210:1319)) # Filtro con todos los gerentes -->
<!-- casen_gerente2017 = cs2017 %>% dplyr::filter(oficio4==1210) #gerente empresa -->
<!-- casen_gerente2017 <- casen_gerente2017 %>% dplyr::select(oficio4, y0101,o23, o15,yrut,y0701,y0801) -->
<!-- casen_gerente2017 = casen_gerente2017 %>% dplyr::filter(o23=="F") #gran empresa > 100 trabajadores -->
<!-- casen_gerente2017 = casen_gerente2017 %>% dplyr::filter(o15 == 1) # empleador -->
<!-- #casen_gerente2017 = casen_gerente2017 %>% dplyr::filter(y0701 <= 1000000) # empleador -->
<!-- # yrut # retiro de utilidades -->
<!-- #y0701 #independiente principal -->
<!-- #table(casen_gerente2017$o15) -->
<!-- # #sjPlot::view_df(casen_gerente2017, show.frq = T, max.len = 1000) -->
<!-- brecha_real2017<-(median(casen_gerente2017$y0701,na.rm = T))/(median(casen_obreros2017$y0101,na.rm = T)) -->
<!-- summary(casen_obreros2017$y0101) -->
<!-- table(casen_gerente2017$y0701) -->
<!-- brecha_real2017 -->
<!-- summary(cs2017$y0101) -->
<!-- summary(cs2017$y0701) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- brecha_salarial<- rbind(psych::describe(brecha_real2000), -->
<!--                psych::describe(brecha_real2009), -->
<!--                psych::describe(brecha_real2017)) -->
<!-- save(brecha_salarial, file = "input/data/processed/dataproccasen/brecha.Rdata") -->
<!-- ``` -->
<!-- ```{r} -->
<!-- salario_gerente<- rbind(psych::describe(casen_gerente2000$yopraj), -->
<!--                psych::describe(casen_gerente2009$yopraj), -->
<!--                psych::describe(casen_gerente2017$y0701)) -->
<!-- save(salario_gerente, file = "input/data/processed/dataproccasen/salario_gerente.Rdata") -->
<!-- ``` -->
<!-- ```{r} -->
<!-- salario_obrero<- rbind(psych::describe(casen_obreros2000$yopraj), -->
<!--                psych::describe(casen_obreros2009$yopraj), -->
<!--                psych::describe(casen_obreros2017$y0101)) -->
<!-- save(salario_obrero, file = "input/data/processed/dataproccasen/salario_obrero.Rdata") -->
<!-- ``` -->
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
